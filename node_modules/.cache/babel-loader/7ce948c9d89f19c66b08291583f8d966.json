{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.holdConfigPropType = exports.Hold = exports.defaultHoldConfig = exports[\"default\"] = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar Hold =\n/*#__PURE__*/\nfunction () {\n  function Hold() {\n    var _this = this;\n\n    _classCallCheck(this, Hold);\n\n    this.isHolding = function () {\n      return _this.holdConfig != null;\n    };\n\n    this.isWithinTolerance = function (_ref) {\n      var x = _ref.x,\n          y = _ref.y;\n      var moveTolerance = _this.holdConfig.moveTolerance;\n      var dx = _this.startX - x;\n      var dy = _this.startY - y;\n      return Math.sqrt(dx * dx + dy * dy) < moveTolerance;\n    };\n\n    this.begin = function (defaultConfig, _ref2, _ref3) {\n      var holdConfig = _ref2.holdConfig,\n          noResume = _ref2.noResume,\n          onHold = _ref2.onHold,\n          onHoldEnd = _ref2.onHoldEnd,\n          onHoldPulse = _ref2.onHoldPulse;\n      var x = _ref3.x,\n          y = _ref3.y;\n      if (!onHold && !onHoldPulse) return;\n      _this.startX = x;\n      _this.startY = y;\n      _this.holdConfig = _objectSpread({}, defaultConfig, holdConfig, {\n        onHold: onHold,\n        onHoldEnd: onHoldEnd,\n        onHoldPulse: onHoldPulse,\n        resume: !noResume\n      }); // copy the events array since it is mutated for each hold\n\n      _this.holdConfig.events = _this.holdConfig.events.slice();\n\n      _this.holdConfig.events.sort(function (a, b) {\n        if (a.time < b.time) return -1;\n        if (a.time > b.time) return 1;\n        return 0;\n      });\n\n      _this.pulsing = false;\n      _this.next = _this.holdConfig.events.shift();\n\n      if (_this.next) {\n        _this.holdStart = window.performance.now();\n\n        _this.startJob();\n      }\n    };\n\n    this.move = function (coords) {\n      if (!_this.isHolding()) return;\n      var _this$holdConfig = _this.holdConfig,\n          cancelOnMove = _this$holdConfig.cancelOnMove,\n          resume = _this$holdConfig.resume;\n\n      if (cancelOnMove) {\n        var shouldEnd = !_this.isWithinTolerance(coords);\n\n        if (shouldEnd) {\n          if (resume) {\n            _this.suspend();\n          } else {\n            _this.end();\n          }\n        } else if (resume && !shouldEnd) {\n          _this.resume();\n        }\n      }\n    };\n\n    this.blur = function () {\n      if (!_this.isHolding()) return;\n\n      if (!_this.holdConfig.global) {\n        _this.end();\n      }\n    };\n\n    this.end = function () {\n      if (!_this.isHolding()) return;\n      var onHoldEnd = _this.holdConfig.onHoldEnd;\n\n      if (_this.pulsing && onHoldEnd) {\n        var time = window.performance.now() - _this.holdStart;\n\n        onHoldEnd({\n          type: 'onHoldEnd',\n          time: time\n        });\n      }\n\n      _this.suspend();\n\n      _this.pulsing = false;\n      _this.holdConfig = null;\n    };\n\n    this.enter = function () {\n      if (!_this.isHolding()) return;\n      var _this$holdConfig2 = _this.holdConfig,\n          cancelOnMove = _this$holdConfig2.cancelOnMove,\n          resume = _this$holdConfig2.resume;\n\n      if (resume && !cancelOnMove) {\n        _this.resume();\n      }\n    };\n\n    this.leave = function () {\n      if (!_this.isHolding()) return;\n      var _this$holdConfig3 = _this.holdConfig,\n          isGlobal = _this$holdConfig3.global,\n          resume = _this$holdConfig3.resume;\n      if (isGlobal) return;\n\n      if (resume) {\n        _this.suspend();\n      } else {\n        _this.end();\n      }\n    };\n\n    this.suspend = function () {\n      clearInterval(_this.holdJob);\n      _this.holdJob = null;\n    };\n\n    this.resume = function () {\n      if (_this.holdJob !== null) return;\n\n      _this.handlePulse();\n\n      _this.startJob();\n    };\n\n    this.handlePulse = function () {\n      var holdTime = window.performance.now() - _this.holdStart;\n\n      var n = _this.next;\n\n      while (n && n.time <= holdTime) {\n        var _this$holdConfig4 = _this.holdConfig,\n            events = _this$holdConfig4.events,\n            onHold = _this$holdConfig4.onHold;\n        _this.pulsing = true;\n\n        if (onHold) {\n          onHold(_objectSpread({\n            type: 'onHold'\n          }, n));\n        } // if the hold is canceled from the onHold handler, we should bail early and prevent\n        // additional hold/pulse events\n\n\n        if (!_this.isHolding()) {\n          _this.pulsing = false;\n          break;\n        }\n\n        n = _this.next = events && events.shift();\n      }\n\n      if (_this.pulsing) {\n        var onHoldPulse = _this.holdConfig.onHoldPulse;\n\n        if (onHoldPulse) {\n          onHoldPulse({\n            type: 'onHoldPulse',\n            time: holdTime\n          });\n        }\n      }\n    };\n\n    this.holdJob = null;\n    this.holdStart = null;\n    this.pulsing = false;\n    this.next = null;\n  }\n\n  _createClass(Hold, [{\n    key: \"startJob\",\n    value: function startJob() {\n      var frequency = this.holdConfig.frequency;\n\n      if (!this.holdJob) {\n        this.holdJob = setInterval(this.handlePulse, frequency);\n      }\n    }\n  }]);\n\n  return Hold;\n}();\n\nexports.Hold = Hold;\nvar defaultHoldConfig = {\n  cancelOnMove: false,\n  events: [{\n    name: 'hold',\n    time: 200\n  }],\n  frequency: 200,\n  global: false,\n  moveTolerance: 16\n};\nexports.defaultHoldConfig = defaultHoldConfig;\n\nvar holdConfigPropType = _propTypes[\"default\"].shape({\n  cancelOnMove: _propTypes[\"default\"].bool,\n  events: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    name: _propTypes[\"default\"].string,\n    time: _propTypes[\"default\"].number\n  })),\n  frequency: _propTypes[\"default\"].number,\n  global: _propTypes[\"default\"].bool,\n  moveTolerance: _propTypes[\"default\"].number\n});\n\nexports.holdConfigPropType = holdConfigPropType;\nvar _default = Hold;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/home/cdi/final/SteApp/node_modules/@enact/ui/Touchable/Hold.js"],"names":["Object","defineProperty","exports","value","holdConfigPropType","Hold","defaultHoldConfig","_propTypes","_interopRequireDefault","require","obj","__esModule","_objectSpread","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","prototype","_this","isHolding","holdConfig","isWithinTolerance","_ref","x","y","moveTolerance","dx","startX","dy","startY","Math","sqrt","begin","defaultConfig","_ref2","_ref3","noResume","onHold","onHoldEnd","onHoldPulse","resume","events","slice","sort","a","b","time","pulsing","next","shift","holdStart","window","performance","now","startJob","move","coords","_this$holdConfig","cancelOnMove","shouldEnd","suspend","end","blur","global","type","enter","_this$holdConfig2","leave","_this$holdConfig3","isGlobal","clearInterval","holdJob","handlePulse","holdTime","n","_this$holdConfig4","frequency","setInterval","name","shape","bool","arrayOf","string","number","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.holdConfigPropType = exports.Hold = exports.defaultHoldConfig = exports[\"default\"] = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Hold =\n/*#__PURE__*/\nfunction () {\n  function Hold() {\n    var _this = this;\n\n    _classCallCheck(this, Hold);\n\n    this.isHolding = function () {\n      return _this.holdConfig != null;\n    };\n\n    this.isWithinTolerance = function (_ref) {\n      var x = _ref.x,\n          y = _ref.y;\n      var moveTolerance = _this.holdConfig.moveTolerance;\n      var dx = _this.startX - x;\n      var dy = _this.startY - y;\n      return Math.sqrt(dx * dx + dy * dy) < moveTolerance;\n    };\n\n    this.begin = function (defaultConfig, _ref2, _ref3) {\n      var holdConfig = _ref2.holdConfig,\n          noResume = _ref2.noResume,\n          onHold = _ref2.onHold,\n          onHoldEnd = _ref2.onHoldEnd,\n          onHoldPulse = _ref2.onHoldPulse;\n      var x = _ref3.x,\n          y = _ref3.y;\n      if (!onHold && !onHoldPulse) return;\n      _this.startX = x;\n      _this.startY = y;\n      _this.holdConfig = _objectSpread({}, defaultConfig, holdConfig, {\n        onHold: onHold,\n        onHoldEnd: onHoldEnd,\n        onHoldPulse: onHoldPulse,\n        resume: !noResume\n      }); // copy the events array since it is mutated for each hold\n\n      _this.holdConfig.events = _this.holdConfig.events.slice();\n\n      _this.holdConfig.events.sort(function (a, b) {\n        if (a.time < b.time) return -1;\n        if (a.time > b.time) return 1;\n        return 0;\n      });\n\n      _this.pulsing = false;\n      _this.next = _this.holdConfig.events.shift();\n\n      if (_this.next) {\n        _this.holdStart = window.performance.now();\n\n        _this.startJob();\n      }\n    };\n\n    this.move = function (coords) {\n      if (!_this.isHolding()) return;\n      var _this$holdConfig = _this.holdConfig,\n          cancelOnMove = _this$holdConfig.cancelOnMove,\n          resume = _this$holdConfig.resume;\n\n      if (cancelOnMove) {\n        var shouldEnd = !_this.isWithinTolerance(coords);\n\n        if (shouldEnd) {\n          if (resume) {\n            _this.suspend();\n          } else {\n            _this.end();\n          }\n        } else if (resume && !shouldEnd) {\n          _this.resume();\n        }\n      }\n    };\n\n    this.blur = function () {\n      if (!_this.isHolding()) return;\n\n      if (!_this.holdConfig.global) {\n        _this.end();\n      }\n    };\n\n    this.end = function () {\n      if (!_this.isHolding()) return;\n      var onHoldEnd = _this.holdConfig.onHoldEnd;\n\n      if (_this.pulsing && onHoldEnd) {\n        var time = window.performance.now() - _this.holdStart;\n\n        onHoldEnd({\n          type: 'onHoldEnd',\n          time: time\n        });\n      }\n\n      _this.suspend();\n\n      _this.pulsing = false;\n      _this.holdConfig = null;\n    };\n\n    this.enter = function () {\n      if (!_this.isHolding()) return;\n      var _this$holdConfig2 = _this.holdConfig,\n          cancelOnMove = _this$holdConfig2.cancelOnMove,\n          resume = _this$holdConfig2.resume;\n\n      if (resume && !cancelOnMove) {\n        _this.resume();\n      }\n    };\n\n    this.leave = function () {\n      if (!_this.isHolding()) return;\n      var _this$holdConfig3 = _this.holdConfig,\n          isGlobal = _this$holdConfig3.global,\n          resume = _this$holdConfig3.resume;\n      if (isGlobal) return;\n\n      if (resume) {\n        _this.suspend();\n      } else {\n        _this.end();\n      }\n    };\n\n    this.suspend = function () {\n      clearInterval(_this.holdJob);\n      _this.holdJob = null;\n    };\n\n    this.resume = function () {\n      if (_this.holdJob !== null) return;\n\n      _this.handlePulse();\n\n      _this.startJob();\n    };\n\n    this.handlePulse = function () {\n      var holdTime = window.performance.now() - _this.holdStart;\n\n      var n = _this.next;\n\n      while (n && n.time <= holdTime) {\n        var _this$holdConfig4 = _this.holdConfig,\n            events = _this$holdConfig4.events,\n            onHold = _this$holdConfig4.onHold;\n        _this.pulsing = true;\n\n        if (onHold) {\n          onHold(_objectSpread({\n            type: 'onHold'\n          }, n));\n        } // if the hold is canceled from the onHold handler, we should bail early and prevent\n        // additional hold/pulse events\n\n\n        if (!_this.isHolding()) {\n          _this.pulsing = false;\n          break;\n        }\n\n        n = _this.next = events && events.shift();\n      }\n\n      if (_this.pulsing) {\n        var onHoldPulse = _this.holdConfig.onHoldPulse;\n\n        if (onHoldPulse) {\n          onHoldPulse({\n            type: 'onHoldPulse',\n            time: holdTime\n          });\n        }\n      }\n    };\n\n    this.holdJob = null;\n    this.holdStart = null;\n    this.pulsing = false;\n    this.next = null;\n  }\n\n  _createClass(Hold, [{\n    key: \"startJob\",\n    value: function startJob() {\n      var frequency = this.holdConfig.frequency;\n\n      if (!this.holdJob) {\n        this.holdJob = setInterval(this.handlePulse, frequency);\n      }\n    }\n  }]);\n\n  return Hold;\n}();\n\nexports.Hold = Hold;\nvar defaultHoldConfig = {\n  cancelOnMove: false,\n  events: [{\n    name: 'hold',\n    time: 200\n  }],\n  frequency: 200,\n  global: false,\n  moveTolerance: 16\n};\nexports.defaultHoldConfig = defaultHoldConfig;\n\nvar holdConfigPropType = _propTypes[\"default\"].shape({\n  cancelOnMove: _propTypes[\"default\"].bool,\n  events: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n    name: _propTypes[\"default\"].string,\n    time: _propTypes[\"default\"].number\n  })),\n  frequency: _propTypes[\"default\"].number,\n  global: _propTypes[\"default\"].bool,\n  moveTolerance: _propTypes[\"default\"].number\n});\n\nexports.holdConfigPropType = holdConfigPropType;\nvar _default = Hold;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"module"}