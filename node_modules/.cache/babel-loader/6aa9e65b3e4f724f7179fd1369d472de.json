{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Job = exports[\"default\"] = void 0;\n\nvar _invariant = _interopRequireDefault(require(\"invariant\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n/**\n * Provides a convenient way to manage timed execution of functions.\n *\n * @class Job\n * @memberof core/util\n * @public\n */\n\n\nvar Job =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @constructor\n   * @param {Function}    fn       Function to execute as the requested job.\n   * @param {Number}      timeout  The number of milliseconds to wait before starting the job.\n   *\n   * @memberof core/util.Job.prototype\n   */\n  function Job(fn, _timeout) {\n    var _this = this;\n\n    _classCallCheck(this, Job);\n\n    this.id = null;\n    this.fn = null;\n    this.timeout = null;\n    this.type = null;\n\n    this.start = function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this.startAfter.apply(_this, [_this.timeout].concat(args));\n    };\n\n    this.startAfter = function (timeout) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      _this.stop();\n\n      _this.type = 'timeout';\n      _this.id = setTimeout(function () {\n        return _this.run(args);\n      }, timeout);\n    };\n\n    this.stop = function () {\n      if (_this.id) {\n        if (_this.type === 'idle') {\n          window.cancelIdleCallback(_this.id);\n        } else if (_this.type === 'raf') {\n          window.cancelAnimationFrame(_this.id);\n        } else if (_this.type === 'timeout') {\n          clearTimeout(_this.id);\n        }\n\n        _this.id = _this.type = null;\n      }\n    };\n\n    this.throttle = function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      _this.throttleUntil.apply(_this, [_this.timeout].concat(args));\n    };\n\n    this.throttleUntil = function (timeout) {\n      if (!_this.id) {\n        _this.type = 'timeout';\n\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n\n        _this.run(args);\n\n        _this.id = setTimeout(_this.stop, timeout);\n      }\n    };\n\n    this.idle = function () {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n\n      _this.idleUntil.apply(_this, [null].concat(args));\n    };\n\n    this.idleUntil = function (timeout) {\n      for (var _len6 = arguments.length, args = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n        args[_key6 - 1] = arguments[_key6];\n      }\n\n      if (typeof window !== 'undefined' && window.requestIdleCallback) {\n        _this.stop();\n\n        _this.type = 'idle';\n        _this.id = window.requestIdleCallback(function () {\n          return _this.run(args);\n        }, {\n          timeout: timeout\n        });\n      } else {\n        // since we can't request an idle callback, just pass to startAfter()\n        _this.startAfter.apply(_this, [timeout].concat(args));\n      }\n    };\n\n    this.startRaf = function () {\n      for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        args[_key7] = arguments[_key7];\n      }\n\n      _this.startRafAfter.apply(_this, [_this.timeout].concat(args));\n    };\n\n    this.startRafAfter = function (timeout) {\n      for (var _len8 = arguments.length, args = new Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n        args[_key8 - 1] = arguments[_key8];\n      }\n\n      _this.type = 'raf';\n\n      if (typeof window !== 'undefined') {\n        var time = null;\n\n        var callback = function callback(timestamp) {\n          if (time === null) {\n            time = timestamp;\n          }\n\n          if (timeout && timestamp - time < timeout) {\n            _this.id = window.requestAnimationFrame(callback);\n          } else {\n            time = null;\n\n            _this.run(args);\n\n            window.cancelAnimationFrame(_this.id);\n            _this.id = null;\n          }\n        };\n\n        _this.id = window.requestAnimationFrame(callback);\n      } else {\n        // If requestAnimationFrame is not supported just run the function immediately\n        _this.run(args);\n      }\n    };\n\n    this.promise = function (promise) {\n      !(promise && typeof promise.then === 'function') ? process.env.NODE_ENV !== \"production\" ? (0, _invariant[\"default\"])(false, 'promise expects a thenable') : !false ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0 : void 0;\n      _this.type = 'promise';\n      _this.id = promise;\n      return promise.then(function (result) {\n        if (_this.id === promise) {\n          _this.stop();\n\n          return _this.run([result]);\n        }\n      });\n    };\n\n    this.fn = fn;\n    this.timeout = _timeout;\n  }\n\n  _createClass(Job, [{\n    key: \"run\",\n    value: function run(args) {\n      // don't want to inadvertently apply Job's context on `fn`\n      return this.fn.apply(null, args);\n    }\n    /**\n     * Starts the job.\n     *\n     * @method\n     * @param   {...*}       [args]  Any args passed are forwarded to the callback\n     *\n     * @returns {undefined}\n     * @memberof core/util.Job.prototype\n     * @public\n     */\n\n  }]);\n\n  return Job;\n}();\n\nexports.Job = Job;\nvar _default = Job;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/home/cdi/SteApp/node_modules/@enact/core/util/Job.js"],"names":["Object","defineProperty","exports","value","Job","_invariant","_interopRequireDefault","require","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","fn","_timeout","_this","id","timeout","type","start","_len","arguments","args","Array","_key","startAfter","apply","concat","_len2","_key2","stop","setTimeout","run","window","cancelIdleCallback","cancelAnimationFrame","clearTimeout","throttle","_len3","_key3","throttleUntil","_len4","_key4","idle","_len5","_key5","idleUntil","_len6","_key6","requestIdleCallback","startRaf","_len7","_key7","startRafAfter","_len8","_key8","time","callback","timestamp","requestAnimationFrame","promise","then","process","env","NODE_ENV","invariant","result","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Job = exports[\"default\"] = void 0;\n\nvar _invariant = _interopRequireDefault(require(\"invariant\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Provides a convenient way to manage timed execution of functions.\n *\n * @class Job\n * @memberof core/util\n * @public\n */\nvar Job =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @constructor\n   * @param {Function}    fn       Function to execute as the requested job.\n   * @param {Number}      timeout  The number of milliseconds to wait before starting the job.\n   *\n   * @memberof core/util.Job.prototype\n   */\n  function Job(fn, _timeout) {\n    var _this = this;\n\n    _classCallCheck(this, Job);\n\n    this.id = null;\n    this.fn = null;\n    this.timeout = null;\n    this.type = null;\n\n    this.start = function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this.startAfter.apply(_this, [_this.timeout].concat(args));\n    };\n\n    this.startAfter = function (timeout) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      _this.stop();\n\n      _this.type = 'timeout';\n      _this.id = setTimeout(function () {\n        return _this.run(args);\n      }, timeout);\n    };\n\n    this.stop = function () {\n      if (_this.id) {\n        if (_this.type === 'idle') {\n          window.cancelIdleCallback(_this.id);\n        } else if (_this.type === 'raf') {\n          window.cancelAnimationFrame(_this.id);\n        } else if (_this.type === 'timeout') {\n          clearTimeout(_this.id);\n        }\n\n        _this.id = _this.type = null;\n      }\n    };\n\n    this.throttle = function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      _this.throttleUntil.apply(_this, [_this.timeout].concat(args));\n    };\n\n    this.throttleUntil = function (timeout) {\n      if (!_this.id) {\n        _this.type = 'timeout';\n\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n\n        _this.run(args);\n\n        _this.id = setTimeout(_this.stop, timeout);\n      }\n    };\n\n    this.idle = function () {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n\n      _this.idleUntil.apply(_this, [null].concat(args));\n    };\n\n    this.idleUntil = function (timeout) {\n      for (var _len6 = arguments.length, args = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n        args[_key6 - 1] = arguments[_key6];\n      }\n\n      if (typeof window !== 'undefined' && window.requestIdleCallback) {\n        _this.stop();\n\n        _this.type = 'idle';\n        _this.id = window.requestIdleCallback(function () {\n          return _this.run(args);\n        }, {\n          timeout: timeout\n        });\n      } else {\n        // since we can't request an idle callback, just pass to startAfter()\n        _this.startAfter.apply(_this, [timeout].concat(args));\n      }\n    };\n\n    this.startRaf = function () {\n      for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        args[_key7] = arguments[_key7];\n      }\n\n      _this.startRafAfter.apply(_this, [_this.timeout].concat(args));\n    };\n\n    this.startRafAfter = function (timeout) {\n      for (var _len8 = arguments.length, args = new Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n        args[_key8 - 1] = arguments[_key8];\n      }\n\n      _this.type = 'raf';\n\n      if (typeof window !== 'undefined') {\n        var time = null;\n\n        var callback = function callback(timestamp) {\n          if (time === null) {\n            time = timestamp;\n          }\n\n          if (timeout && timestamp - time < timeout) {\n            _this.id = window.requestAnimationFrame(callback);\n          } else {\n            time = null;\n\n            _this.run(args);\n\n            window.cancelAnimationFrame(_this.id);\n            _this.id = null;\n          }\n        };\n\n        _this.id = window.requestAnimationFrame(callback);\n      } else {\n        // If requestAnimationFrame is not supported just run the function immediately\n        _this.run(args);\n      }\n    };\n\n    this.promise = function (promise) {\n      !(promise && typeof promise.then === 'function') ? process.env.NODE_ENV !== \"production\" ? (0, _invariant[\"default\"])(false, 'promise expects a thenable') : invariant(false) : void 0;\n      _this.type = 'promise';\n      _this.id = promise;\n      return promise.then(function (result) {\n        if (_this.id === promise) {\n          _this.stop();\n\n          return _this.run([result]);\n        }\n      });\n    };\n\n    this.fn = fn;\n    this.timeout = _timeout;\n  }\n\n  _createClass(Job, [{\n    key: \"run\",\n    value: function run(args) {\n      // don't want to inadvertently apply Job's context on `fn`\n      return this.fn.apply(null, args);\n    }\n    /**\n     * Starts the job.\n     *\n     * @method\n     * @param   {...*}       [args]  Any args passed are forwarded to the callback\n     *\n     * @returns {undefined}\n     * @memberof core/util.Job.prototype\n     * @public\n     */\n\n  }]);\n\n  return Job;\n}();\n\nexports.Job = Job;\nvar _default = Job;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"module"}