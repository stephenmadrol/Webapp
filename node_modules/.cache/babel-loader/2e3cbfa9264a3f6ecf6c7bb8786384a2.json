{"ast":null,"code":"\"use strict\";\n\nfunction _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VirtualListBaseNative = exports.VirtualListBase = exports.ScrollableVirtualListNative = exports.ScrollableVirtualList = exports[\"default\"] = void 0;\n\nvar _clamp = _interopRequireDefault(require(\"ramda/src/clamp\"));\n\nvar _keymap = require(\"@enact/core/keymap\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\n\nvar _Pause = _interopRequireDefault(require(\"@enact/spotlight/Pause\"));\n\nvar _Spottable = _interopRequireDefault(require(\"@enact/spotlight/Spottable\"));\n\nvar _Accelerator = _interopRequireDefault(require(\"@enact/spotlight/Accelerator\"));\n\nvar _VirtualList = require(\"@enact/ui/VirtualList\");\n\nvar _Scrollable = require(\"../Scrollable\");\n\nvar _ScrollableNative = _interopRequireDefault(require(\"../Scrollable/ScrollableNative\"));\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj[\"default\"] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar SpotlightAccelerator = new _Accelerator[\"default\"]();\nvar SpotlightPlaceholder = (0, _Spottable[\"default\"])('div');\n\nvar dataContainerDisabledAttribute = 'data-spotlight-container-disabled',\n    isDown = (0, _keymap.is)('down'),\n    isEnter = (0, _keymap.is)('enter'),\n    isLeft = (0, _keymap.is)('left'),\n    isRight = (0, _keymap.is)('right'),\n    isUp = (0, _keymap.is)('up'),\n    JS = 'JS',\n    Native = 'Native',\n    isItemDisabledDefault = function isItemDisabledDefault() {\n  return false;\n},\n    // using 'bitwise or' for string > number conversion based on performance: https://jsperf.com/convert-string-to-number-techniques/7\ngetNumberValue = function getNumberValue(index) {\n  return index | 0;\n};\n/**\n * The base version of [VirtualListBase]{@link moonstone/VirtualList.VirtualListBase} and\n * [VirtualListBaseNative]{@link moonstone/VirtualList.VirtualListBaseNative}.\n *\n * @class VirtualListCore\n * @memberof moonstone/VirtualList\n * @ui\n * @public\n */\n\n\nvar VirtualListBaseFactory = function VirtualListBaseFactory(type) {\n  var _class, _temp;\n\n  var UiBase = type === JS ? _VirtualList.VirtualListBase : _VirtualList.VirtualListBaseNative;\n  return _temp = _class =\n  /*#__PURE__*/\n  function (_Component) {\n    _inherits(VirtualListCore, _Component);\n    /* No displayName here. We set displayName to returned components of this factory function. */\n\n\n    function VirtualListCore(props) {\n      var _this;\n\n      _classCallCheck(this, VirtualListCore);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(VirtualListCore).call(this, props));\n      _this.isScrolledBy5way = false;\n      _this.isScrolledByJump = false;\n      _this.isWrappedBy5way = false;\n      _this.lastFocusedIndex = null;\n      _this.nodeIndexToBeFocused = null;\n      _this.preservedIndex = null;\n      _this.restoreLastFocused = false;\n      _this.uiRefCurrent = null;\n\n      _this.setContainerDisabled = function (bool) {\n        var spotlightId = _this.props.spotlightId,\n            containerNode = document.querySelector(\"[data-spotlight-id=\\\"\".concat(spotlightId, \"\\\"]\"));\n\n        if (containerNode) {\n          containerNode.setAttribute(dataContainerDisabledAttribute, bool);\n\n          if (bool) {\n            document.addEventListener('keydown', _this.handleGlobalKeyDown, {\n              capture: true\n            });\n          } else {\n            document.removeEventListener('keydown', _this.handleGlobalKeyDown, {\n              capture: true\n            });\n          }\n        }\n      };\n\n      _this.configureSpotlight = function (spotlightId) {\n        var spacing = _this.props.spacing;\n\n        _spotlight[\"default\"].set(spotlightId, {\n          enterTo: 'last-focused',\n\n          /*\n           * Returns the data-index as the key for last focused\n           */\n          lastFocusedPersist: _this.lastFocusedPersist,\n\n          /*\n           * Restores the data-index into the placeholder if its the only element. Tries to find a\n           * matching child otherwise.\n           */\n          lastFocusedRestore: _this.lastFocusedRestore,\n\n          /*\n           * Directs spotlight focus to favor straight elements that are within range of `spacing`\n           * over oblique elements, like scroll buttons.\n           */\n          obliqueMultiplier: spacing > 0 ? spacing : 1\n        });\n      };\n\n      _this.lastFocusedPersist = function () {\n        if (_this.lastFocusedIndex != null) {\n          return {\n            container: false,\n            element: true,\n            key: _this.lastFocusedIndex\n          };\n        }\n      };\n\n      _this.lastFocusedRestore = function (_ref, all) {\n        var key = _ref.key;\n\n        if (all.length === 1 && 'vlPlaceholder' in all[0].dataset) {\n          all[0].dataset.index = key;\n          return all[0];\n        }\n\n        return all.reduce(function (focused, node) {\n          return focused || Number(node.dataset.index) === key && node;\n        }, null);\n      };\n\n      _this.getExtentIndex = function (index) {\n        return Math.floor(index / _this.uiRefCurrent.dimensionToExtent);\n      };\n\n      _this.findSpottableItem = function (indexFrom, indexTo) {\n        var _this$props = _this.props,\n            dataSize = _this$props.dataSize,\n            isItemDisabled = _this$props.isItemDisabled,\n            safeIndexFrom = (0, _clamp[\"default\"])(0, dataSize - 1, indexFrom),\n            safeIndexTo = (0, _clamp[\"default\"])(-1, dataSize, indexTo),\n            delta = indexFrom < indexTo ? 1 : -1;\n\n        if (indexFrom < 0 && indexTo < 0 || indexFrom >= dataSize && indexTo >= dataSize) {\n          return -1;\n        } else if (isItemDisabled === isItemDisabledDefault) {\n          return safeIndexFrom;\n        }\n\n        if (safeIndexFrom !== safeIndexTo) {\n          for (var i = safeIndexFrom; i !== safeIndexTo; i += delta) {\n            if (!isItemDisabled(i)) {\n              return i;\n            }\n          }\n        }\n\n        return -1;\n      };\n\n      _this.findSpottableItemWithPositionInExtent = function (indexFrom, indexTo, position) {\n        var dataSize = _this.props.dataSize,\n            dimensionToExtent = _this.uiRefCurrent.dimensionToExtent;\n\n        if (0 <= indexFrom && indexFrom < dataSize && -1 <= indexTo && indexTo <= dataSize && 0 <= position && position < dimensionToExtent) {\n          var isItemDisabled = _this.props.isItemDisabled,\n              direction = indexFrom < indexTo ? 1 : -1,\n              delta = direction * dimensionToExtent,\n              diffPosition = indexFrom % dimensionToExtent - position,\n              startIndex = indexFrom - diffPosition + (direction * diffPosition > 0 ? delta : 0);\n\n          for (var i = startIndex; direction * (indexTo - i) > 0; i += delta) {\n            if (!isItemDisabled(i)) {\n              return i;\n            }\n          }\n        }\n\n        return -1;\n      };\n\n      _this.findSpottableExtent = function (indexFrom, isForward) {\n        var dataSize = _this.props.dataSize,\n            dimensionToExtent = _this.uiRefCurrent.dimensionToExtent,\n            _assertThisInitialize = _assertThisInitialized(_this),\n            findSpottableItem = _assertThisInitialize.findSpottableItem,\n            getExtentIndex = _assertThisInitialize.getExtentIndex,\n            firstIndexInExtent = getExtentIndex(indexFrom) * dimensionToExtent;\n\n        var index;\n\n        if (isForward) {\n          index = findSpottableItem(firstIndexInExtent + dimensionToExtent, dataSize);\n        } else {\n          index = findSpottableItem(firstIndexInExtent - 1, -1);\n        }\n\n        return getExtentIndex(index);\n      };\n\n      _this.findNearestSpottableItemInExtent = function (index, extentIndex) {\n        var _this$props2 = _this.props,\n            dataSize = _this$props2.dataSize,\n            isItemDisabled = _this$props2.isItemDisabled,\n            dimensionToExtent = _this.uiRefCurrent.dimensionToExtent,\n            currentPosInExtent = (0, _clamp[\"default\"])(0, dataSize - 1, index) % dimensionToExtent,\n            firstIndexInExtent = (0, _clamp[\"default\"])(0, _this.getExtentIndex(dataSize - 1), extentIndex) * dimensionToExtent,\n            lastIndexInExtent = (0, _clamp[\"default\"])(firstIndexInExtent, dataSize, firstIndexInExtent + dimensionToExtent);\n        var minDistance = dimensionToExtent,\n            distance,\n            nearestIndex = -1;\n\n        for (var i = firstIndexInExtent; i < lastIndexInExtent; ++i) {\n          if (!isItemDisabled(i)) {\n            distance = Math.abs(currentPosInExtent - i % dimensionToExtent);\n\n            if (distance < minDistance) {\n              minDistance = distance;\n              nearestIndex = i;\n            }\n          }\n        }\n\n        return nearestIndex;\n      };\n\n      _this.getIndexToScroll = function (direction, currentIndex) {\n        var _this$props3 = _this.props,\n            dataSize = _this$props3.dataSize,\n            spacing = _this$props3.spacing,\n            _this$uiRefCurrent = _this.uiRefCurrent,\n            dimensionToExtent = _this$uiRefCurrent.dimensionToExtent,\n            _this$uiRefCurrent$pr = _this$uiRefCurrent.primary,\n            clientSize = _this$uiRefCurrent$pr.clientSize,\n            gridSize = _this$uiRefCurrent$pr.gridSize,\n            itemSize = _this$uiRefCurrent$pr.itemSize,\n            scrollPosition = _this$uiRefCurrent.scrollPosition,\n            _assertThisInitialize2 = _assertThisInitialized(_this),\n            findSpottableItem = _assertThisInitialize2.findSpottableItem,\n            numOfItemsInPage = Math.floor((clientSize + spacing) / gridSize) * dimensionToExtent,\n            firstFullyVisibleIndex = Math.ceil(scrollPosition / gridSize) * dimensionToExtent,\n            lastFullyVisibleIndex = Math.min(dataSize - 1, Math.floor((scrollPosition + clientSize - itemSize) / gridSize) * dimensionToExtent);\n\n        var candidateIndex = -1;\n        /* First, find a spottable item in this page */\n\n        if (direction === 'down') {\n          // Page Down\n          if (lastFullyVisibleIndex - lastFullyVisibleIndex % dimensionToExtent > currentIndex) {\n            // If a current focused item is in the last visible line.\n            candidateIndex = findSpottableItem(lastFullyVisibleIndex, currentIndex - currentIndex % dimensionToExtent + dimensionToExtent - 1);\n          }\n        } else if (firstFullyVisibleIndex + dimensionToExtent <= currentIndex) {\n          // Page Up,  if a current focused item is in the first visible line.\n          candidateIndex = findSpottableItem(firstFullyVisibleIndex, currentIndex - currentIndex % dimensionToExtent);\n        }\n        /* Second, find a spottable item in the next page */\n\n\n        if (candidateIndex === -1) {\n          if (direction === 'down') {\n            // Page Down\n            candidateIndex = findSpottableItem(lastFullyVisibleIndex + numOfItemsInPage, lastFullyVisibleIndex);\n          } else {\n            // Page Up\n            candidateIndex = findSpottableItem(firstFullyVisibleIndex - numOfItemsInPage, firstFullyVisibleIndex);\n          }\n        }\n        /* Last, find a spottable item in a whole data */\n\n\n        if (candidateIndex === -1) {\n          if (direction === 'down') {\n            // Page Down\n            candidateIndex = findSpottableItem(lastFullyVisibleIndex + numOfItemsInPage + 1, dataSize);\n          } else {\n            // Page Up\n            candidateIndex = findSpottableItem(firstFullyVisibleIndex - numOfItemsInPage - 1, -1);\n          }\n        }\n        /* For grid lists, find the nearest item from the current item */\n\n\n        if (candidateIndex !== -1) {\n          return _this.findNearestSpottableItemInExtent(currentIndex, _this.getExtentIndex(candidateIndex));\n        } else {\n          return -1;\n        }\n      };\n\n      _this.scrollToNextItem = function (_ref2) {\n        var direction = _ref2.direction,\n            focusedItem = _ref2.focusedItem;\n\n        var cbScrollTo = _this.props.cbScrollTo,\n            _this$uiRefCurrent$st = _this.uiRefCurrent.state,\n            firstIndex = _this$uiRefCurrent$st.firstIndex,\n            numOfItems = _this$uiRefCurrent$st.numOfItems,\n            focusedIndex = getNumberValue(focusedItem.getAttribute(_Scrollable.dataIndexAttribute)),\n            indexToScroll = _this.getIndexToScroll(direction, focusedIndex);\n\n        if (indexToScroll !== -1 && focusedIndex !== indexToScroll) {\n          if (firstIndex <= indexToScroll && indexToScroll < firstIndex + numOfItems) {\n            var node = _this.uiRefCurrent.containerRef.current.querySelector(\"[data-index='\".concat(indexToScroll, \"'].spottable\"));\n\n            if (node) {\n              _spotlight[\"default\"].focus(node);\n            }\n          } else {\n            // Scroll to the next spottable item without animation\n            _this.pause.pause();\n\n            focusedItem.blur();\n            _this.nodeIndexToBeFocused = _this.lastFocusedIndex = indexToScroll;\n          }\n\n          cbScrollTo({\n            index: indexToScroll,\n            stickTo: direction === 'down' ? 'end' : 'start',\n            animate: false\n          });\n        }\n      };\n\n      _this.getNextIndex = function (_ref3) {\n        var index = _ref3.index,\n            keyCode = _ref3.keyCode,\n            repeat = _ref3.repeat;\n        var _this$props4 = _this.props,\n            dataSize = _this$props4.dataSize,\n            isItemDisabled = _this$props4.isItemDisabled,\n            rtl = _this$props4.rtl,\n            wrap = _this$props4.wrap;\n        var _this$uiRefCurrent2 = _this.uiRefCurrent,\n            isPrimaryDirectionVertical = _this$uiRefCurrent2.isPrimaryDirectionVertical,\n            dimensionToExtent = _this$uiRefCurrent2.dimensionToExtent;\n        var column = index % dimensionToExtent;\n        var row = (index - column) % dataSize / dimensionToExtent;\n        var isDownKey = isDown(keyCode);\n        var isLeftMovement = !rtl && isLeft(keyCode) || rtl && isRight(keyCode);\n        var isRightMovement = !rtl && isRight(keyCode) || rtl && isLeft(keyCode);\n        var isUpKey = isUp(keyCode);\n        var isNextRow = index + dimensionToExtent < dataSize;\n        var isNextAdjacent = column < dimensionToExtent - 1 && index < dataSize - 1;\n        var isWrapped = false;\n        var nextIndex = -1;\n        var targetIndex = -1;\n\n        if (isPrimaryDirectionVertical) {\n          if (isUpKey && row) {\n            targetIndex = index - dimensionToExtent;\n          } else if (isDownKey && isNextRow) {\n            targetIndex = index + dimensionToExtent;\n          } else if (isLeftMovement && column) {\n            targetIndex = index - 1;\n          } else if (isRightMovement && isNextAdjacent) {\n            targetIndex = index + 1;\n          }\n        } else if (isLeftMovement && row) {\n          targetIndex = index - dimensionToExtent;\n        } else if (isRightMovement && isNextRow) {\n          targetIndex = index + dimensionToExtent;\n        } else if (isUpKey && column) {\n          targetIndex = index - 1;\n        } else if (isDownKey && isNextAdjacent) {\n          targetIndex = index + 1;\n        }\n\n        if (targetIndex >= 0 && !isItemDisabled(targetIndex)) {\n          nextIndex = targetIndex;\n        }\n\n        if (!repeat && nextIndex === -1 && wrap) {\n          var isForward = isPrimaryDirectionVertical && isDownKey || !isPrimaryDirectionVertical && isRightMovement || null;\n          var isBackward = isPrimaryDirectionVertical && isUpKey || !isPrimaryDirectionVertical && isLeftMovement || null;\n\n          if (isForward && _this.findSpottableItem((row + 1) * dimensionToExtent, dataSize) < 0) {\n            nextIndex = _this.findSpottableItem(0, index);\n            isWrapped = true;\n          } else if (isBackward && _this.findSpottableItem(-1, row * dimensionToExtent - 1) < 0) {\n            nextIndex = _this.findSpottableItem(dataSize, index);\n            isWrapped = true;\n          }\n        }\n\n        return {\n          isWrapped: isWrapped,\n          nextIndex: nextIndex\n        };\n      };\n\n      _this.onAcceleratedKeyDown = function (_ref4) {\n        var keyCode = _ref4.keyCode,\n            repeat = _ref4.repeat,\n            target = _ref4.target;\n        var _this$props5 = _this.props,\n            cbScrollTo = _this$props5.cbScrollTo,\n            spacing = _this$props5.spacing,\n            wrap = _this$props5.wrap;\n        var _this$uiRefCurrent3 = _this.uiRefCurrent,\n            dimensionToExtent = _this$uiRefCurrent3.dimensionToExtent,\n            _this$uiRefCurrent3$p = _this$uiRefCurrent3.primary,\n            clientSize = _this$uiRefCurrent3$p.clientSize,\n            gridSize = _this$uiRefCurrent3$p.gridSize,\n            scrollPosition = _this$uiRefCurrent3.scrollPosition;\n        var index = getNumberValue(target.dataset.index);\n\n        var _this$getNextIndex = _this.getNextIndex({\n          index: index,\n          keyCode: keyCode,\n          repeat: repeat\n        }),\n            isWrapped = _this$getNextIndex.isWrapped,\n            nextIndex = _this$getNextIndex.nextIndex;\n\n        _this.isScrolledBy5way = false;\n        _this.isScrolledByJump = false;\n\n        if (nextIndex >= 0) {\n          var numOfItemsInPage = Math.floor((clientSize + spacing) / gridSize) * dimensionToExtent;\n          var firstFullyVisibleIndex = Math.ceil(scrollPosition / gridSize) * dimensionToExtent;\n          var isNextItemInView = nextIndex >= firstFullyVisibleIndex && nextIndex < firstFullyVisibleIndex + numOfItemsInPage;\n          _this.lastFocusedIndex = nextIndex;\n\n          if (isNextItemInView) {\n            _this.focusOnItem(nextIndex);\n          } else {\n            _this.isScrolledBy5way = true;\n            _this.isWrappedBy5way = isWrapped;\n\n            if (isWrapped && _this.uiRefCurrent.containerRef.current.querySelector(\"[data-index='\".concat(nextIndex, \"'].spottable\")) == null) {\n              if (wrap === true) {\n                _this.pause.pause();\n\n                target.blur();\n              } else {\n                _this.focusOnItem(nextIndex);\n              }\n\n              _this.nodeIndexToBeFocused = nextIndex;\n            } else {\n              _this.focusOnItem(nextIndex);\n            }\n\n            cbScrollTo({\n              index: nextIndex,\n              stickTo: index < nextIndex ? 'end' : 'start',\n              animate: !(isWrapped && wrap === 'noAnimation')\n            });\n          }\n        } else if (!repeat && _spotlight[\"default\"].move((0, _spotlight.getDirection)(keyCode))) {\n          SpotlightAccelerator.reset();\n        }\n      };\n\n      _this.onKeyDown = function (ev) {\n        if ((0, _spotlight.getDirection)(ev.keyCode)) {\n          ev.preventDefault();\n          ev.stopPropagation();\n\n          _spotlight[\"default\"].setPointerMode(false);\n\n          SpotlightAccelerator.processKey(ev, _this.onAcceleratedKeyDown);\n        }\n      };\n\n      _this.onKeyUp = function (_ref5) {\n        var keyCode = _ref5.keyCode;\n\n        if ((0, _spotlight.getDirection)(keyCode) || isEnter(keyCode)) {\n          SpotlightAccelerator.reset();\n        }\n      };\n\n      _this.handleGlobalKeyDown = function () {\n        _this.setContainerDisabled(false);\n      };\n\n      _this.focusOnNode = function (node) {\n        if (node) {\n          _spotlight[\"default\"].focus(node);\n        }\n      };\n\n      _this.focusOnItem = function (index) {\n        var item = _this.uiRefCurrent.containerRef.current.querySelector(\"[data-index='\".concat(index, \"'].spottable\"));\n\n        if (_this.isWrappedBy5way) {\n          SpotlightAccelerator.reset();\n          _this.isWrappedBy5way = false;\n        }\n\n        _this.pause.resume();\n\n        _this.focusOnNode(item);\n\n        _this.nodeIndexToBeFocused = null;\n        _this.isScrolledByJump = false;\n      };\n\n      _this.initItemRef = function (ref, index) {\n        if (ref) {\n          if (type === JS) {\n            _this.focusOnItem(index);\n          } else {\n            // If focusing the item of VirtuallistNative, `onFocus` in Scrollable will be called.\n            // Then VirtualListNative tries to scroll again differently from VirtualList.\n            // So we would like to skip `focus` handling when focusing the item as a workaround.\n            _this.isScrolledByJump = true;\n\n            _this.focusOnItem(index);\n          }\n        }\n      };\n\n      _this.focusByIndex = function (index) {\n        // We have to focus node async for now since list items are not yet ready when it reaches componentDid* lifecycle methods\n        setTimeout(function () {\n          _this.focusOnItem(index);\n        }, 0);\n      };\n\n      _this.isNeededScrollingPlaceholder = function () {\n        return _this.nodeIndexToBeFocused != null && _spotlight[\"default\"].isPaused();\n      };\n\n      _this.handlePlaceholderFocus = function (ev) {\n        var placeholder = ev.currentTarget;\n\n        if (placeholder) {\n          var index = placeholder.dataset.index;\n\n          if (index) {\n            _this.preservedIndex = getNumberValue(index);\n            _this.restoreLastFocused = true;\n          }\n        }\n      };\n\n      _this.isPlaceholderFocused = function () {\n        var current = _spotlight[\"default\"].getCurrent();\n\n        if (current && current.dataset.vlPlaceholder && _this.uiRefCurrent.containerRef.current.contains(current)) {\n          return true;\n        }\n\n        return false;\n      };\n\n      _this.restoreFocus = function () {\n        if (_this.restoreLastFocused && !_this.isPlaceholderFocused()) {\n          var spotlightId = _this.props.spotlightId,\n              node = _this.uiRefCurrent.containerRef.current.querySelector(\"[data-spotlight-id=\\\"\".concat(spotlightId, \"\\\"] [data-index=\\\"\").concat(_this.preservedIndex, \"\\\"]\"));\n\n          if (node) {\n            // if we're supposed to restore focus and virtual list has positioned a set of items\n            // that includes lastFocusedIndex, clear the indicator\n            _this.restoreLastFocused = false; // try to focus the last focused item\n\n            var foundLastFocused = _spotlight[\"default\"].focus(node); // but if that fails (because it isn't found or is disabled), focus the container so\n            // spotlight isn't lost\n\n\n            if (!foundLastFocused) {\n              _this.restoreLastFocused = true;\n\n              _spotlight[\"default\"].focus(spotlightId);\n            }\n          }\n        }\n      };\n\n      _this.calculatePositionOnFocus = function (_ref6) {\n        var item = _ref6.item,\n            _ref6$scrollPosition = _ref6.scrollPosition,\n            scrollPosition = _ref6$scrollPosition === void 0 ? _this.uiRefCurrent.scrollPosition : _ref6$scrollPosition;\n        var pageScroll = _this.props.pageScroll,\n            numOfItems = _this.uiRefCurrent.state.numOfItems,\n            primary = _this.uiRefCurrent.primary,\n            offsetToClientEnd = primary.clientSize - primary.itemSize,\n            focusedIndex = getNumberValue(item.getAttribute(_Scrollable.dataIndexAttribute));\n\n        if (!isNaN(focusedIndex)) {\n          var gridPosition = _this.uiRefCurrent.getGridPosition(focusedIndex);\n\n          if (numOfItems > 0 && focusedIndex % numOfItems !== _this.lastFocusedIndex % numOfItems) {\n            var node = _this.uiRefCurrent.getItemNode(_this.lastFocusedIndex);\n\n            if (node) {\n              node.blur();\n            }\n          }\n\n          _this.nodeIndexToBeFocused = null;\n          _this.lastFocusedIndex = focusedIndex;\n\n          if (primary.clientSize >= primary.itemSize) {\n            if (gridPosition.primaryPosition > scrollPosition + offsetToClientEnd) {\n              // forward over\n              gridPosition.primaryPosition -= pageScroll ? 0 : offsetToClientEnd;\n            } else if (gridPosition.primaryPosition >= scrollPosition) {\n              // inside of client\n              if (type === JS) {\n                gridPosition.primaryPosition = scrollPosition;\n              } else {\n                // This code uses the trick to change the target position slightly which will not affect the actual result\n                // since a browser ignore `scrollTo` method if the target position is same as the current position.\n                gridPosition.primaryPosition = scrollPosition + (_this.uiRefCurrent.scrollPosition === scrollPosition ? 0.1 : 0);\n              }\n            } else {\n              // backward over\n              gridPosition.primaryPosition -= pageScroll ? offsetToClientEnd : 0;\n            }\n          } // Since the result is used as a target position to be scrolled,\n          // scrondaryPosition should be 0 here.\n\n\n          gridPosition.secondaryPosition = 0;\n          return _this.uiRefCurrent.gridPositionToItemPosition(gridPosition);\n        }\n      };\n\n      _this.shouldPreventScrollByFocus = function () {\n        return type === JS ? _this.isScrolledBy5way : _this.isScrolledBy5way || _this.isScrolledByJump;\n      };\n\n      _this.shouldPreventOverscrollEffect = function () {\n        return _this.isWrappedBy5way;\n      };\n\n      _this.setLastFocusedNode = function (node) {\n        _this.lastFocusedIndex = node.dataset && getNumberValue(node.dataset.index);\n      };\n\n      _this.updateStatesAndBounds = function (_ref7) {\n        var cbScrollTo = _ref7.cbScrollTo,\n            dataSize = _ref7.dataSize,\n            moreInfo = _ref7.moreInfo,\n            numOfItems = _ref7.numOfItems;\n\n        var _assertThisInitialize3 = _assertThisInitialized(_this),\n            preservedIndex = _assertThisInitialize3.preservedIndex;\n\n        if (_this.restoreLastFocused && numOfItems > 0 && preservedIndex < dataSize && (preservedIndex < moreInfo.firstVisibleIndex || preservedIndex > moreInfo.lastVisibleIndex)) {\n          // If we need to restore last focus and the index is beyond the screen,\n          // we call `scrollTo` to create DOM for it.\n          cbScrollTo({\n            index: preservedIndex,\n            animate: false,\n            focus: true\n          });\n          _this.isScrolledByJump = true;\n          return true;\n        } else {\n          return false;\n        }\n      };\n\n      _this.getScrollBounds = function () {\n        return _this.uiRefCurrent.getScrollBounds();\n      };\n\n      _this.getComponentProps = function (index) {\n        return index === _this.nodeIndexToBeFocused ? {\n          ref: function ref(_ref8) {\n            return _this.initItemRef(_ref8, index);\n          }\n        } : {};\n      };\n\n      _this.initUiRef = function (ref) {\n        if (ref) {\n          _this.uiRefCurrent = ref;\n\n          _this.props.initUiChildRef(ref);\n        }\n      };\n\n      var _spotlightId = props.spotlightId;\n\n      if (_spotlightId) {\n        _this.configureSpotlight(_spotlightId);\n      }\n\n      _this.pause = new _Pause[\"default\"]('VirtualListBase');\n      return _this;\n    }\n\n    _createClass(VirtualListCore, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        var containerNode = this.uiRefCurrent.containerRef.current;\n\n        if (type === JS) {\n          // prevent native scrolling by Spotlight\n          this.preventScroll = function () {\n            containerNode.scrollTop = 0;\n            containerNode.scrollLeft = _this2.props.rtl ? containerNode.scrollWidth : 0;\n          };\n\n          if (containerNode && containerNode.addEventListener) {\n            containerNode.addEventListener('scroll', this.preventScroll);\n          }\n        }\n\n        if (containerNode && containerNode.addEventListener) {\n          containerNode.addEventListener('keydown', this.onKeyDown);\n          containerNode.addEventListener('keyup', this.onKeyUp);\n        }\n\n        setTimeout(function () {\n          _this2.restoreFocus();\n        }, 0);\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        if (prevProps.spotlightId !== this.props.spotlightId) {\n          this.configureSpotlight(this.props.spotlightId);\n        }\n\n        this.restoreFocus();\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        var containerNode = this.uiRefCurrent.containerRef.current;\n\n        if (type === JS) {\n          // remove a function for preventing native scrolling by Spotlight\n          if (containerNode && containerNode.removeEventListener) {\n            containerNode.removeEventListener('scroll', this.preventScroll);\n          }\n        }\n\n        if (containerNode && containerNode.removeEventListener) {\n          containerNode.removeEventListener('keydown', this.onKeyDown);\n          containerNode.removeEventListener('keyup', this.onKeyUp);\n        }\n\n        this.pause.resume();\n        SpotlightAccelerator.reset();\n        this.setContainerDisabled(false);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this3 = this;\n\n        var _this$props6 = this.props,\n            _itemRenderer = _this$props6.itemRenderer,\n            _itemsRenderer = _this$props6.itemsRenderer,\n            rest = _objectWithoutProperties(_this$props6, [\"itemRenderer\", \"itemsRenderer\"]),\n            needsScrollingPlaceholder = this.isNeededScrollingPlaceholder();\n\n        delete rest.initUiChildRef;\n        delete rest.isItemDisabled;\n        delete rest.spotlightId;\n        delete rest.wrap;\n        return _react[\"default\"].createElement(UiBase, Object.assign({}, rest, {\n          getComponentProps: this.getComponentProps,\n          itemRenderer: function itemRenderer(_ref9) {\n            var _objectSpread2;\n\n            var index = _ref9.index,\n                itemRest = _objectWithoutProperties(_ref9, [\"index\"]);\n\n            return (// eslint-disable-line react/jsx-no-bind\n              _itemRenderer(_objectSpread({}, itemRest, (_objectSpread2 = {}, _defineProperty(_objectSpread2, _Scrollable.dataIndexAttribute, index), _defineProperty(_objectSpread2, \"index\", index), _objectSpread2)))\n            );\n          },\n          ref: this.initUiRef,\n          updateStatesAndBounds: this.updateStatesAndBounds,\n          itemsRenderer: function itemsRenderer(props) {\n            // eslint-disable-line react/jsx-no-bind\n            return _itemsRenderer(_objectSpread({}, props, {\n              handlePlaceholderFocus: _this3.handlePlaceholderFocus,\n              needsScrollingPlaceholder: needsScrollingPlaceholder\n            }));\n          }\n        }));\n      }\n    }]);\n\n    return VirtualListCore;\n  }(_react.Component), _class.propTypes =\n  /** @lends moonstone/VirtualList.VirtualListCore.prototype */\n  {\n    /**\n     * The `render` function called for each item in the list.\n     *\n     * > NOTE: The list does NOT always render a component whenever its render function is called\n     * due to performance optimization.\n     *\n     * Usage:\n     * ```\n     * renderItem = ({index, ...rest}) => {\n     * \treturn (\n     * \t\t<MyComponent index={index} {...rest} />\n     * \t);\n     * }\n     * ```\n     *\n     * @type {Function}\n     * @param {Object} event\n     * @param {Number} event.data-index It is required for Spotlight 5-way navigation. Pass to the root element in the component.\n     * @param {Number} event.index The index number of the component to render\n     * @param {Number} event.key It MUST be passed as a prop to the root element in the component for DOM recycling.\n     *\n     * @required\n     * @public\n     */\n    itemRenderer: _propTypes[\"default\"].func.isRequired,\n\n    /**\n     * The render function for the items.\n     *\n     * @type {Function}\n     * @required\n     * @private\n     */\n    itemsRenderer: _propTypes[\"default\"].func.isRequired,\n\n    /**\n     * Callback method of scrollTo.\n     * Normally, [Scrollable]{@link ui/Scrollable.Scrollable} should set this value.\n     *\n     * @type {Function}\n     * @private\n     */\n    cbScrollTo: _propTypes[\"default\"].func,\n\n    /**\n     * Size of the data.\n     *\n     * @type {Number}\n     * @default 0\n     * @public\n     */\n    dataSize: _propTypes[\"default\"].number,\n\n    /**\n     * Passes the instance of [VirtualList]{@link ui/VirtualList.VirtualList}.\n     *\n     * @type {Object}\n     * @param {Object} ref\n     * @private\n     */\n    initUiChildRef: _propTypes[\"default\"].func,\n\n    /**\n     * The Function that returns `true` if the item at the index is disabled.\n     * It is used to navigate a list properly with 5 way keys, page up key,\n     * and page down key. If it is not supplied, it assumes that no items are disabled.\n     *\n     * Usage:\n     * ```\n     * isItemDisabled = (index) => (this.items[index].disabled)\n     * render = () => {\n     * \treturn (\n     * \t\t<VirtualList\n     * \t\t\tdataSize={this.items.length}\n     * \t\t\tisItemDisabled={isItemDisabled}\n     * \t\t\titemRenderer={this.renderItem}\n     * \t\t\titemSize={this.itemSize}\n     * \t\t/>\n     * \t);\n     * }\n     * ```\n     *\n     * @type {Function}\n     * @param {Number} index\n     * @public\n     */\n    isItemDisabled: _propTypes[\"default\"].func,\n\n    /*\n     * It scrolls by page when `true`, by item when `false`.\n     *\n     * @type {Boolean}\n     * @default false\n     * @private\n     */\n    pageScroll: _propTypes[\"default\"].bool,\n\n    /**\n     * `true` if rtl, `false` if ltr.\n     * Normally, [Scrollable]{@link ui/Scrollable.Scrollable} should set this value.\n     *\n     * @type {Boolean}\n     * @private\n     */\n    rtl: _propTypes[\"default\"].bool,\n\n    /**\n     * Spacing between items.\n     *\n     * @type {Number}\n     * @default 0\n     * @public\n     */\n    spacing: _propTypes[\"default\"].number,\n\n    /**\n     * Spotlight Id. It would be the same with [Scrollable]{@link ui/Scrollable.Scrollable}'s.\n     *\n     * @type {String}\n     * @private\n     */\n    spotlightId: _propTypes[\"default\"].string,\n\n    /**\n     * When it's `true` and the spotlight focus cannot move to the given direction anymore by 5-way keys,\n     * a list is scrolled with an animation to the other side and the spotlight focus moves in wraparound manner.\n     *\n     * When it's `'noAnimation'`, the spotlight focus moves in wraparound manner as same as when it's `true`\n     * except that a list is scrolled without an animation.\n     *\n     * @type {Boolean|String}\n     * @default false\n     * @public\n     */\n    wrap: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].bool, _propTypes[\"default\"].oneOf(['noAnimation'])])\n  }, _class.defaultProps = {\n    dataSize: 0,\n    isItemDisabled: isItemDisabledDefault,\n    pageScroll: false,\n    spacing: 0,\n    wrap: false\n  }, _temp;\n};\n/**\n * A Moonstone-styled base component for [VirtualList]{@link moonstone/VirtualList.VirtualList} and\n * [VirtualGridList]{@link moonstone/VirtualList.VirtualGridList}.\n *\n * @class VirtualListBase\n * @memberof moonstone/VirtualList\n * @extends ui/VirtualList.VirtualListBase\n * @ui\n * @public\n */\n\n\nvar VirtualListBase = VirtualListBaseFactory(JS);\nexports.VirtualListBase = VirtualListBase;\nVirtualListBase.displayName = 'VirtualListBase';\n/**\n * Activates the component for voice control.\n *\n * @name data-webos-voice-focused\n * @memberof moonstone/VirtualList.VirtualListBase.prototype\n * @type {Boolean}\n * @public\n */\n\n/**\n * The voice control group label.\n *\n * @name data-webos-voice-group-label\n * @memberof moonstone/VirtualList.VirtualListBase.prototype\n * @type {String}\n * @public\n */\n\n/**\n * A Moonstone-styled base component for [VirtualListNative]{@link moonstone/VirtualList.VirtualListNative} and\n * [VirtualGridListNative]{@link moonstone/VirtualList.VirtualGridListNative}.\n *\n * @class VirtualListBaseNative\n * @memberof moonstone/VirtualList\n * @extends ui/VirtualList.VirtualListBaseNative\n * @ui\n * @private\n */\n\nvar VirtualListBaseNative = VirtualListBaseFactory(Native);\nexports.VirtualListBaseNative = VirtualListBaseNative;\nVirtualListBaseNative.displayName = 'VirtualListBaseNative';\n\nvar ScrollableVirtualList = function ScrollableVirtualList(props) {\n  return (// eslint-disable-line react/jsx-no-bind\n    _react[\"default\"].createElement(_Scrollable.Scrollable, Object.assign({}, props, {\n      childRenderer: function childRenderer(childProps) {\n        return (// eslint-disable-line react/jsx-no-bind\n          _react[\"default\"].createElement(VirtualListBase, Object.assign({}, childProps, {\n            itemsRenderer: function itemsRenderer(_ref10) {\n              var cc = _ref10.cc,\n                  handlePlaceholderFocus = _ref10.handlePlaceholderFocus,\n                  initUiItemContainerRef = _ref10.initItemContainerRef,\n                  needsScrollingPlaceholder = _ref10.needsScrollingPlaceholder,\n                  primary = _ref10.primary;\n              return (// eslint-disable-line react/jsx-no-bind\n                [cc.length ? _react[\"default\"].createElement(\"div\", {\n                  key: \"0\",\n                  ref: initUiItemContainerRef,\n                  role: \"list\"\n                }, cc) : null, primary ? null : _react[\"default\"].createElement(SpotlightPlaceholder, {\n                  \"data-index\": 0,\n                  \"data-vl-placeholder\": true,\n                  key: \"1\",\n                  onFocus: handlePlaceholderFocus\n                }), needsScrollingPlaceholder ? _react[\"default\"].createElement(SpotlightPlaceholder, {\n                  key: \"2\"\n                }) : null]\n              );\n            }\n          }))\n        );\n      }\n    }))\n  );\n};\n\nexports.ScrollableVirtualList = ScrollableVirtualList;\nScrollableVirtualList.propTypes =\n/** @lends moonstone/VirtualList.VirtualListBase.prototype */\n{\n  /**\n   * Direction of the list.\n   *\n   * Valid values are:\n   * * `'horizontal'`, and\n   * * `'vertical'`.\n   *\n   * @type {String}\n   * @default 'vertical'\n   * @public\n   */\n  direction: _propTypes[\"default\"].oneOf(['horizontal', 'vertical'])\n};\nScrollableVirtualList.defaultProps = {\n  direction: 'vertical'\n};\n\nvar ScrollableVirtualListNative = function ScrollableVirtualListNative(props) {\n  return _react[\"default\"].createElement(_ScrollableNative[\"default\"], Object.assign({}, props, {\n    childRenderer: function childRenderer(childProps) {\n      return (// eslint-disable-line react/jsx-no-bind\n        _react[\"default\"].createElement(VirtualListBaseNative, Object.assign({}, childProps, {\n          itemsRenderer: function itemsRenderer(_ref11) {\n            var cc = _ref11.cc,\n                handlePlaceholderFocus = _ref11.handlePlaceholderFocus,\n                initUiItemContainerRef = _ref11.initItemContainerRef,\n                needsScrollingPlaceholder = _ref11.needsScrollingPlaceholder,\n                primary = _ref11.primary;\n            return (// eslint-disable-line react/jsx-no-bind\n              [cc.length ? _react[\"default\"].createElement(\"div\", {\n                key: \"0\",\n                ref: initUiItemContainerRef,\n                role: \"list\"\n              }, cc) : null, primary ? null : _react[\"default\"].createElement(SpotlightPlaceholder, {\n                \"data-index\": 0,\n                \"data-vl-placeholder\": true,\n                key: \"1\",\n                onFocus: handlePlaceholderFocus\n              }), needsScrollingPlaceholder ? _react[\"default\"].createElement(SpotlightPlaceholder, {\n                key: \"2\"\n              }) : null]\n            );\n          }\n        }))\n      );\n    }\n  }));\n};\n\nexports.ScrollableVirtualListNative = ScrollableVirtualListNative;\nScrollableVirtualListNative.propTypes =\n/** @lends moonstone/VirtualList.VirtualListBaseNative.prototype */\n{\n  /**\n   * Direction of the list.\n   *\n   * Valid values are:\n   * * `'horizontal'`, and\n   * * `'vertical'`.\n   *\n   * @type {String}\n   * @default 'vertical'\n   * @public\n   */\n  direction: _propTypes[\"default\"].oneOf(['horizontal', 'vertical'])\n};\nScrollableVirtualListNative.defaultProps = {\n  direction: 'vertical'\n};\nvar _default = VirtualListBase;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/home/cdi/SteApp/node_modules/@enact/moonstone/VirtualList/VirtualListBase.js"],"names":["Object","defineProperty","exports","value","VirtualListBaseNative","VirtualListBase","ScrollableVirtualListNative","ScrollableVirtualList","_clamp","_interopRequireDefault","require","_keymap","_propTypes","_react","_interopRequireWildcard","_spotlight","_Pause","_Spottable","_Accelerator","_VirtualList","_Scrollable","_ScrollableNative","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","_typeof","Symbol","iterator","constructor","_objectSpread","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","enumerable","forEach","_defineProperty","configurable","writable","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","_setPrototypeOf","p","SpotlightAccelerator","SpotlightPlaceholder","dataContainerDisabledAttribute","isDown","is","isEnter","isLeft","isRight","isUp","JS","Native","isItemDisabledDefault","getNumberValue","index","VirtualListBaseFactory","type","_class","_temp","UiBase","_Component","VirtualListCore","_this","isScrolledBy5way","isScrolledByJump","isWrappedBy5way","lastFocusedIndex","nodeIndexToBeFocused","preservedIndex","restoreLastFocused","uiRefCurrent","setContainerDisabled","bool","spotlightId","containerNode","document","querySelector","setAttribute","addEventListener","handleGlobalKeyDown","capture","removeEventListener","configureSpotlight","spacing","enterTo","lastFocusedPersist","lastFocusedRestore","obliqueMultiplier","container","element","_ref","all","dataset","reduce","focused","node","Number","getExtentIndex","Math","floor","dimensionToExtent","findSpottableItem","indexFrom","indexTo","_this$props","dataSize","isItemDisabled","safeIndexFrom","safeIndexTo","delta","findSpottableItemWithPositionInExtent","position","direction","diffPosition","startIndex","findSpottableExtent","isForward","_assertThisInitialize","firstIndexInExtent","findNearestSpottableItemInExtent","extentIndex","_this$props2","currentPosInExtent","lastIndexInExtent","minDistance","distance","nearestIndex","abs","getIndexToScroll","currentIndex","_this$props3","_this$uiRefCurrent","_this$uiRefCurrent$pr","primary","clientSize","gridSize","itemSize","scrollPosition","_assertThisInitialize2","numOfItemsInPage","firstFullyVisibleIndex","ceil","lastFullyVisibleIndex","min","candidateIndex","scrollToNextItem","_ref2","focusedItem","cbScrollTo","_this$uiRefCurrent$st","state","firstIndex","numOfItems","focusedIndex","getAttribute","dataIndexAttribute","indexToScroll","containerRef","current","focus","pause","blur","stickTo","animate","getNextIndex","_ref3","keyCode","repeat","_this$props4","rtl","wrap","_this$uiRefCurrent2","isPrimaryDirectionVertical","column","row","isDownKey","isLeftMovement","isRightMovement","isUpKey","isNextRow","isNextAdjacent","isWrapped","nextIndex","targetIndex","isBackward","onAcceleratedKeyDown","_ref4","_this$props5","_this$uiRefCurrent3","_this$uiRefCurrent3$p","_this$getNextIndex","isNextItemInView","focusOnItem","move","getDirection","reset","onKeyDown","ev","preventDefault","stopPropagation","setPointerMode","processKey","onKeyUp","_ref5","focusOnNode","item","resume","initItemRef","ref","focusByIndex","setTimeout","isNeededScrollingPlaceholder","isPaused","handlePlaceholderFocus","placeholder","currentTarget","isPlaceholderFocused","getCurrent","vlPlaceholder","contains","restoreFocus","foundLastFocused","calculatePositionOnFocus","_ref6","_ref6$scrollPosition","pageScroll","offsetToClientEnd","isNaN","gridPosition","getGridPosition","getItemNode","primaryPosition","secondaryPosition","gridPositionToItemPosition","shouldPreventScrollByFocus","shouldPreventOverscrollEffect","setLastFocusedNode","updateStatesAndBounds","_ref7","moreInfo","_assertThisInitialize3","firstVisibleIndex","lastVisibleIndex","getScrollBounds","getComponentProps","_ref8","initUiRef","initUiChildRef","_spotlightId","componentDidMount","_this2","preventScroll","scrollTop","scrollLeft","scrollWidth","componentDidUpdate","prevProps","componentWillUnmount","render","_this3","_this$props6","_itemRenderer","itemRenderer","_itemsRenderer","itemsRenderer","rest","needsScrollingPlaceholder","createElement","assign","_ref9","_objectSpread2","itemRest","Component","propTypes","func","isRequired","number","string","oneOfType","oneOf","defaultProps","displayName","Scrollable","childRenderer","childProps","_ref10","cc","initUiItemContainerRef","initItemContainerRef","role","onFocus","_ref11","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VirtualListBaseNative = exports.VirtualListBase = exports.ScrollableVirtualListNative = exports.ScrollableVirtualList = exports[\"default\"] = void 0;\n\nvar _clamp = _interopRequireDefault(require(\"ramda/src/clamp\"));\n\nvar _keymap = require(\"@enact/core/keymap\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\n\nvar _Pause = _interopRequireDefault(require(\"@enact/spotlight/Pause\"));\n\nvar _Spottable = _interopRequireDefault(require(\"@enact/spotlight/Spottable\"));\n\nvar _Accelerator = _interopRequireDefault(require(\"@enact/spotlight/Accelerator\"));\n\nvar _VirtualList = require(\"@enact/ui/VirtualList\");\n\nvar _Scrollable = require(\"../Scrollable\");\n\nvar _ScrollableNative = _interopRequireDefault(require(\"../Scrollable/ScrollableNative\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj[\"default\"] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar SpotlightAccelerator = new _Accelerator[\"default\"]();\nvar SpotlightPlaceholder = (0, _Spottable[\"default\"])('div');\n\nvar dataContainerDisabledAttribute = 'data-spotlight-container-disabled',\n    isDown = (0, _keymap.is)('down'),\n    isEnter = (0, _keymap.is)('enter'),\n    isLeft = (0, _keymap.is)('left'),\n    isRight = (0, _keymap.is)('right'),\n    isUp = (0, _keymap.is)('up'),\n    JS = 'JS',\n    Native = 'Native',\n    isItemDisabledDefault = function isItemDisabledDefault() {\n  return false;\n},\n    // using 'bitwise or' for string > number conversion based on performance: https://jsperf.com/convert-string-to-number-techniques/7\ngetNumberValue = function getNumberValue(index) {\n  return index | 0;\n};\n/**\n * The base version of [VirtualListBase]{@link moonstone/VirtualList.VirtualListBase} and\n * [VirtualListBaseNative]{@link moonstone/VirtualList.VirtualListBaseNative}.\n *\n * @class VirtualListCore\n * @memberof moonstone/VirtualList\n * @ui\n * @public\n */\n\n\nvar VirtualListBaseFactory = function VirtualListBaseFactory(type) {\n  var _class, _temp;\n\n  var UiBase = type === JS ? _VirtualList.VirtualListBase : _VirtualList.VirtualListBaseNative;\n  return _temp = _class =\n  /*#__PURE__*/\n  function (_Component) {\n    _inherits(VirtualListCore, _Component);\n\n    /* No displayName here. We set displayName to returned components of this factory function. */\n    function VirtualListCore(props) {\n      var _this;\n\n      _classCallCheck(this, VirtualListCore);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(VirtualListCore).call(this, props));\n      _this.isScrolledBy5way = false;\n      _this.isScrolledByJump = false;\n      _this.isWrappedBy5way = false;\n      _this.lastFocusedIndex = null;\n      _this.nodeIndexToBeFocused = null;\n      _this.preservedIndex = null;\n      _this.restoreLastFocused = false;\n      _this.uiRefCurrent = null;\n\n      _this.setContainerDisabled = function (bool) {\n        var spotlightId = _this.props.spotlightId,\n            containerNode = document.querySelector(\"[data-spotlight-id=\\\"\".concat(spotlightId, \"\\\"]\"));\n\n        if (containerNode) {\n          containerNode.setAttribute(dataContainerDisabledAttribute, bool);\n\n          if (bool) {\n            document.addEventListener('keydown', _this.handleGlobalKeyDown, {\n              capture: true\n            });\n          } else {\n            document.removeEventListener('keydown', _this.handleGlobalKeyDown, {\n              capture: true\n            });\n          }\n        }\n      };\n\n      _this.configureSpotlight = function (spotlightId) {\n        var spacing = _this.props.spacing;\n\n        _spotlight[\"default\"].set(spotlightId, {\n          enterTo: 'last-focused',\n\n          /*\n           * Returns the data-index as the key for last focused\n           */\n          lastFocusedPersist: _this.lastFocusedPersist,\n\n          /*\n           * Restores the data-index into the placeholder if its the only element. Tries to find a\n           * matching child otherwise.\n           */\n          lastFocusedRestore: _this.lastFocusedRestore,\n\n          /*\n           * Directs spotlight focus to favor straight elements that are within range of `spacing`\n           * over oblique elements, like scroll buttons.\n           */\n          obliqueMultiplier: spacing > 0 ? spacing : 1\n        });\n      };\n\n      _this.lastFocusedPersist = function () {\n        if (_this.lastFocusedIndex != null) {\n          return {\n            container: false,\n            element: true,\n            key: _this.lastFocusedIndex\n          };\n        }\n      };\n\n      _this.lastFocusedRestore = function (_ref, all) {\n        var key = _ref.key;\n\n        if (all.length === 1 && 'vlPlaceholder' in all[0].dataset) {\n          all[0].dataset.index = key;\n          return all[0];\n        }\n\n        return all.reduce(function (focused, node) {\n          return focused || Number(node.dataset.index) === key && node;\n        }, null);\n      };\n\n      _this.getExtentIndex = function (index) {\n        return Math.floor(index / _this.uiRefCurrent.dimensionToExtent);\n      };\n\n      _this.findSpottableItem = function (indexFrom, indexTo) {\n        var _this$props = _this.props,\n            dataSize = _this$props.dataSize,\n            isItemDisabled = _this$props.isItemDisabled,\n            safeIndexFrom = (0, _clamp[\"default\"])(0, dataSize - 1, indexFrom),\n            safeIndexTo = (0, _clamp[\"default\"])(-1, dataSize, indexTo),\n            delta = indexFrom < indexTo ? 1 : -1;\n\n        if (indexFrom < 0 && indexTo < 0 || indexFrom >= dataSize && indexTo >= dataSize) {\n          return -1;\n        } else if (isItemDisabled === isItemDisabledDefault) {\n          return safeIndexFrom;\n        }\n\n        if (safeIndexFrom !== safeIndexTo) {\n          for (var i = safeIndexFrom; i !== safeIndexTo; i += delta) {\n            if (!isItemDisabled(i)) {\n              return i;\n            }\n          }\n        }\n\n        return -1;\n      };\n\n      _this.findSpottableItemWithPositionInExtent = function (indexFrom, indexTo, position) {\n        var dataSize = _this.props.dataSize,\n            dimensionToExtent = _this.uiRefCurrent.dimensionToExtent;\n\n        if (0 <= indexFrom && indexFrom < dataSize && -1 <= indexTo && indexTo <= dataSize && 0 <= position && position < dimensionToExtent) {\n          var isItemDisabled = _this.props.isItemDisabled,\n              direction = indexFrom < indexTo ? 1 : -1,\n              delta = direction * dimensionToExtent,\n              diffPosition = indexFrom % dimensionToExtent - position,\n              startIndex = indexFrom - diffPosition + (direction * diffPosition > 0 ? delta : 0);\n\n          for (var i = startIndex; direction * (indexTo - i) > 0; i += delta) {\n            if (!isItemDisabled(i)) {\n              return i;\n            }\n          }\n        }\n\n        return -1;\n      };\n\n      _this.findSpottableExtent = function (indexFrom, isForward) {\n        var dataSize = _this.props.dataSize,\n            dimensionToExtent = _this.uiRefCurrent.dimensionToExtent,\n            _assertThisInitialize = _assertThisInitialized(_this),\n            findSpottableItem = _assertThisInitialize.findSpottableItem,\n            getExtentIndex = _assertThisInitialize.getExtentIndex,\n            firstIndexInExtent = getExtentIndex(indexFrom) * dimensionToExtent;\n\n        var index;\n\n        if (isForward) {\n          index = findSpottableItem(firstIndexInExtent + dimensionToExtent, dataSize);\n        } else {\n          index = findSpottableItem(firstIndexInExtent - 1, -1);\n        }\n\n        return getExtentIndex(index);\n      };\n\n      _this.findNearestSpottableItemInExtent = function (index, extentIndex) {\n        var _this$props2 = _this.props,\n            dataSize = _this$props2.dataSize,\n            isItemDisabled = _this$props2.isItemDisabled,\n            dimensionToExtent = _this.uiRefCurrent.dimensionToExtent,\n            currentPosInExtent = (0, _clamp[\"default\"])(0, dataSize - 1, index) % dimensionToExtent,\n            firstIndexInExtent = (0, _clamp[\"default\"])(0, _this.getExtentIndex(dataSize - 1), extentIndex) * dimensionToExtent,\n            lastIndexInExtent = (0, _clamp[\"default\"])(firstIndexInExtent, dataSize, firstIndexInExtent + dimensionToExtent);\n        var minDistance = dimensionToExtent,\n            distance,\n            nearestIndex = -1;\n\n        for (var i = firstIndexInExtent; i < lastIndexInExtent; ++i) {\n          if (!isItemDisabled(i)) {\n            distance = Math.abs(currentPosInExtent - i % dimensionToExtent);\n\n            if (distance < minDistance) {\n              minDistance = distance;\n              nearestIndex = i;\n            }\n          }\n        }\n\n        return nearestIndex;\n      };\n\n      _this.getIndexToScroll = function (direction, currentIndex) {\n        var _this$props3 = _this.props,\n            dataSize = _this$props3.dataSize,\n            spacing = _this$props3.spacing,\n            _this$uiRefCurrent = _this.uiRefCurrent,\n            dimensionToExtent = _this$uiRefCurrent.dimensionToExtent,\n            _this$uiRefCurrent$pr = _this$uiRefCurrent.primary,\n            clientSize = _this$uiRefCurrent$pr.clientSize,\n            gridSize = _this$uiRefCurrent$pr.gridSize,\n            itemSize = _this$uiRefCurrent$pr.itemSize,\n            scrollPosition = _this$uiRefCurrent.scrollPosition,\n            _assertThisInitialize2 = _assertThisInitialized(_this),\n            findSpottableItem = _assertThisInitialize2.findSpottableItem,\n            numOfItemsInPage = Math.floor((clientSize + spacing) / gridSize) * dimensionToExtent,\n            firstFullyVisibleIndex = Math.ceil(scrollPosition / gridSize) * dimensionToExtent,\n            lastFullyVisibleIndex = Math.min(dataSize - 1, Math.floor((scrollPosition + clientSize - itemSize) / gridSize) * dimensionToExtent);\n\n        var candidateIndex = -1;\n        /* First, find a spottable item in this page */\n\n        if (direction === 'down') {\n          // Page Down\n          if (lastFullyVisibleIndex - lastFullyVisibleIndex % dimensionToExtent > currentIndex) {\n            // If a current focused item is in the last visible line.\n            candidateIndex = findSpottableItem(lastFullyVisibleIndex, currentIndex - currentIndex % dimensionToExtent + dimensionToExtent - 1);\n          }\n        } else if (firstFullyVisibleIndex + dimensionToExtent <= currentIndex) {\n          // Page Up,  if a current focused item is in the first visible line.\n          candidateIndex = findSpottableItem(firstFullyVisibleIndex, currentIndex - currentIndex % dimensionToExtent);\n        }\n        /* Second, find a spottable item in the next page */\n\n\n        if (candidateIndex === -1) {\n          if (direction === 'down') {\n            // Page Down\n            candidateIndex = findSpottableItem(lastFullyVisibleIndex + numOfItemsInPage, lastFullyVisibleIndex);\n          } else {\n            // Page Up\n            candidateIndex = findSpottableItem(firstFullyVisibleIndex - numOfItemsInPage, firstFullyVisibleIndex);\n          }\n        }\n        /* Last, find a spottable item in a whole data */\n\n\n        if (candidateIndex === -1) {\n          if (direction === 'down') {\n            // Page Down\n            candidateIndex = findSpottableItem(lastFullyVisibleIndex + numOfItemsInPage + 1, dataSize);\n          } else {\n            // Page Up\n            candidateIndex = findSpottableItem(firstFullyVisibleIndex - numOfItemsInPage - 1, -1);\n          }\n        }\n        /* For grid lists, find the nearest item from the current item */\n\n\n        if (candidateIndex !== -1) {\n          return _this.findNearestSpottableItemInExtent(currentIndex, _this.getExtentIndex(candidateIndex));\n        } else {\n          return -1;\n        }\n      };\n\n      _this.scrollToNextItem = function (_ref2) {\n        var direction = _ref2.direction,\n            focusedItem = _ref2.focusedItem;\n\n        var cbScrollTo = _this.props.cbScrollTo,\n            _this$uiRefCurrent$st = _this.uiRefCurrent.state,\n            firstIndex = _this$uiRefCurrent$st.firstIndex,\n            numOfItems = _this$uiRefCurrent$st.numOfItems,\n            focusedIndex = getNumberValue(focusedItem.getAttribute(_Scrollable.dataIndexAttribute)),\n            indexToScroll = _this.getIndexToScroll(direction, focusedIndex);\n\n        if (indexToScroll !== -1 && focusedIndex !== indexToScroll) {\n          if (firstIndex <= indexToScroll && indexToScroll < firstIndex + numOfItems) {\n            var node = _this.uiRefCurrent.containerRef.current.querySelector(\"[data-index='\".concat(indexToScroll, \"'].spottable\"));\n\n            if (node) {\n              _spotlight[\"default\"].focus(node);\n            }\n          } else {\n            // Scroll to the next spottable item without animation\n            _this.pause.pause();\n\n            focusedItem.blur();\n            _this.nodeIndexToBeFocused = _this.lastFocusedIndex = indexToScroll;\n          }\n\n          cbScrollTo({\n            index: indexToScroll,\n            stickTo: direction === 'down' ? 'end' : 'start',\n            animate: false\n          });\n        }\n      };\n\n      _this.getNextIndex = function (_ref3) {\n        var index = _ref3.index,\n            keyCode = _ref3.keyCode,\n            repeat = _ref3.repeat;\n        var _this$props4 = _this.props,\n            dataSize = _this$props4.dataSize,\n            isItemDisabled = _this$props4.isItemDisabled,\n            rtl = _this$props4.rtl,\n            wrap = _this$props4.wrap;\n        var _this$uiRefCurrent2 = _this.uiRefCurrent,\n            isPrimaryDirectionVertical = _this$uiRefCurrent2.isPrimaryDirectionVertical,\n            dimensionToExtent = _this$uiRefCurrent2.dimensionToExtent;\n        var column = index % dimensionToExtent;\n        var row = (index - column) % dataSize / dimensionToExtent;\n        var isDownKey = isDown(keyCode);\n        var isLeftMovement = !rtl && isLeft(keyCode) || rtl && isRight(keyCode);\n        var isRightMovement = !rtl && isRight(keyCode) || rtl && isLeft(keyCode);\n        var isUpKey = isUp(keyCode);\n        var isNextRow = index + dimensionToExtent < dataSize;\n        var isNextAdjacent = column < dimensionToExtent - 1 && index < dataSize - 1;\n        var isWrapped = false;\n        var nextIndex = -1;\n        var targetIndex = -1;\n\n        if (isPrimaryDirectionVertical) {\n          if (isUpKey && row) {\n            targetIndex = index - dimensionToExtent;\n          } else if (isDownKey && isNextRow) {\n            targetIndex = index + dimensionToExtent;\n          } else if (isLeftMovement && column) {\n            targetIndex = index - 1;\n          } else if (isRightMovement && isNextAdjacent) {\n            targetIndex = index + 1;\n          }\n        } else if (isLeftMovement && row) {\n          targetIndex = index - dimensionToExtent;\n        } else if (isRightMovement && isNextRow) {\n          targetIndex = index + dimensionToExtent;\n        } else if (isUpKey && column) {\n          targetIndex = index - 1;\n        } else if (isDownKey && isNextAdjacent) {\n          targetIndex = index + 1;\n        }\n\n        if (targetIndex >= 0 && !isItemDisabled(targetIndex)) {\n          nextIndex = targetIndex;\n        }\n\n        if (!repeat && nextIndex === -1 && wrap) {\n          var isForward = isPrimaryDirectionVertical && isDownKey || !isPrimaryDirectionVertical && isRightMovement || null;\n          var isBackward = isPrimaryDirectionVertical && isUpKey || !isPrimaryDirectionVertical && isLeftMovement || null;\n\n          if (isForward && _this.findSpottableItem((row + 1) * dimensionToExtent, dataSize) < 0) {\n            nextIndex = _this.findSpottableItem(0, index);\n            isWrapped = true;\n          } else if (isBackward && _this.findSpottableItem(-1, row * dimensionToExtent - 1) < 0) {\n            nextIndex = _this.findSpottableItem(dataSize, index);\n            isWrapped = true;\n          }\n        }\n\n        return {\n          isWrapped: isWrapped,\n          nextIndex: nextIndex\n        };\n      };\n\n      _this.onAcceleratedKeyDown = function (_ref4) {\n        var keyCode = _ref4.keyCode,\n            repeat = _ref4.repeat,\n            target = _ref4.target;\n        var _this$props5 = _this.props,\n            cbScrollTo = _this$props5.cbScrollTo,\n            spacing = _this$props5.spacing,\n            wrap = _this$props5.wrap;\n        var _this$uiRefCurrent3 = _this.uiRefCurrent,\n            dimensionToExtent = _this$uiRefCurrent3.dimensionToExtent,\n            _this$uiRefCurrent3$p = _this$uiRefCurrent3.primary,\n            clientSize = _this$uiRefCurrent3$p.clientSize,\n            gridSize = _this$uiRefCurrent3$p.gridSize,\n            scrollPosition = _this$uiRefCurrent3.scrollPosition;\n        var index = getNumberValue(target.dataset.index);\n\n        var _this$getNextIndex = _this.getNextIndex({\n          index: index,\n          keyCode: keyCode,\n          repeat: repeat\n        }),\n            isWrapped = _this$getNextIndex.isWrapped,\n            nextIndex = _this$getNextIndex.nextIndex;\n\n        _this.isScrolledBy5way = false;\n        _this.isScrolledByJump = false;\n\n        if (nextIndex >= 0) {\n          var numOfItemsInPage = Math.floor((clientSize + spacing) / gridSize) * dimensionToExtent;\n          var firstFullyVisibleIndex = Math.ceil(scrollPosition / gridSize) * dimensionToExtent;\n          var isNextItemInView = nextIndex >= firstFullyVisibleIndex && nextIndex < firstFullyVisibleIndex + numOfItemsInPage;\n          _this.lastFocusedIndex = nextIndex;\n\n          if (isNextItemInView) {\n            _this.focusOnItem(nextIndex);\n          } else {\n            _this.isScrolledBy5way = true;\n            _this.isWrappedBy5way = isWrapped;\n\n            if (isWrapped && _this.uiRefCurrent.containerRef.current.querySelector(\"[data-index='\".concat(nextIndex, \"'].spottable\")) == null) {\n              if (wrap === true) {\n                _this.pause.pause();\n\n                target.blur();\n              } else {\n                _this.focusOnItem(nextIndex);\n              }\n\n              _this.nodeIndexToBeFocused = nextIndex;\n            } else {\n              _this.focusOnItem(nextIndex);\n            }\n\n            cbScrollTo({\n              index: nextIndex,\n              stickTo: index < nextIndex ? 'end' : 'start',\n              animate: !(isWrapped && wrap === 'noAnimation')\n            });\n          }\n        } else if (!repeat && _spotlight[\"default\"].move((0, _spotlight.getDirection)(keyCode))) {\n          SpotlightAccelerator.reset();\n        }\n      };\n\n      _this.onKeyDown = function (ev) {\n        if ((0, _spotlight.getDirection)(ev.keyCode)) {\n          ev.preventDefault();\n          ev.stopPropagation();\n\n          _spotlight[\"default\"].setPointerMode(false);\n\n          SpotlightAccelerator.processKey(ev, _this.onAcceleratedKeyDown);\n        }\n      };\n\n      _this.onKeyUp = function (_ref5) {\n        var keyCode = _ref5.keyCode;\n\n        if ((0, _spotlight.getDirection)(keyCode) || isEnter(keyCode)) {\n          SpotlightAccelerator.reset();\n        }\n      };\n\n      _this.handleGlobalKeyDown = function () {\n        _this.setContainerDisabled(false);\n      };\n\n      _this.focusOnNode = function (node) {\n        if (node) {\n          _spotlight[\"default\"].focus(node);\n        }\n      };\n\n      _this.focusOnItem = function (index) {\n        var item = _this.uiRefCurrent.containerRef.current.querySelector(\"[data-index='\".concat(index, \"'].spottable\"));\n\n        if (_this.isWrappedBy5way) {\n          SpotlightAccelerator.reset();\n          _this.isWrappedBy5way = false;\n        }\n\n        _this.pause.resume();\n\n        _this.focusOnNode(item);\n\n        _this.nodeIndexToBeFocused = null;\n        _this.isScrolledByJump = false;\n      };\n\n      _this.initItemRef = function (ref, index) {\n        if (ref) {\n          if (type === JS) {\n            _this.focusOnItem(index);\n          } else {\n            // If focusing the item of VirtuallistNative, `onFocus` in Scrollable will be called.\n            // Then VirtualListNative tries to scroll again differently from VirtualList.\n            // So we would like to skip `focus` handling when focusing the item as a workaround.\n            _this.isScrolledByJump = true;\n\n            _this.focusOnItem(index);\n          }\n        }\n      };\n\n      _this.focusByIndex = function (index) {\n        // We have to focus node async for now since list items are not yet ready when it reaches componentDid* lifecycle methods\n        setTimeout(function () {\n          _this.focusOnItem(index);\n        }, 0);\n      };\n\n      _this.isNeededScrollingPlaceholder = function () {\n        return _this.nodeIndexToBeFocused != null && _spotlight[\"default\"].isPaused();\n      };\n\n      _this.handlePlaceholderFocus = function (ev) {\n        var placeholder = ev.currentTarget;\n\n        if (placeholder) {\n          var index = placeholder.dataset.index;\n\n          if (index) {\n            _this.preservedIndex = getNumberValue(index);\n            _this.restoreLastFocused = true;\n          }\n        }\n      };\n\n      _this.isPlaceholderFocused = function () {\n        var current = _spotlight[\"default\"].getCurrent();\n\n        if (current && current.dataset.vlPlaceholder && _this.uiRefCurrent.containerRef.current.contains(current)) {\n          return true;\n        }\n\n        return false;\n      };\n\n      _this.restoreFocus = function () {\n        if (_this.restoreLastFocused && !_this.isPlaceholderFocused()) {\n          var spotlightId = _this.props.spotlightId,\n              node = _this.uiRefCurrent.containerRef.current.querySelector(\"[data-spotlight-id=\\\"\".concat(spotlightId, \"\\\"] [data-index=\\\"\").concat(_this.preservedIndex, \"\\\"]\"));\n\n          if (node) {\n            // if we're supposed to restore focus and virtual list has positioned a set of items\n            // that includes lastFocusedIndex, clear the indicator\n            _this.restoreLastFocused = false; // try to focus the last focused item\n\n            var foundLastFocused = _spotlight[\"default\"].focus(node); // but if that fails (because it isn't found or is disabled), focus the container so\n            // spotlight isn't lost\n\n\n            if (!foundLastFocused) {\n              _this.restoreLastFocused = true;\n\n              _spotlight[\"default\"].focus(spotlightId);\n            }\n          }\n        }\n      };\n\n      _this.calculatePositionOnFocus = function (_ref6) {\n        var item = _ref6.item,\n            _ref6$scrollPosition = _ref6.scrollPosition,\n            scrollPosition = _ref6$scrollPosition === void 0 ? _this.uiRefCurrent.scrollPosition : _ref6$scrollPosition;\n        var pageScroll = _this.props.pageScroll,\n            numOfItems = _this.uiRefCurrent.state.numOfItems,\n            primary = _this.uiRefCurrent.primary,\n            offsetToClientEnd = primary.clientSize - primary.itemSize,\n            focusedIndex = getNumberValue(item.getAttribute(_Scrollable.dataIndexAttribute));\n\n        if (!isNaN(focusedIndex)) {\n          var gridPosition = _this.uiRefCurrent.getGridPosition(focusedIndex);\n\n          if (numOfItems > 0 && focusedIndex % numOfItems !== _this.lastFocusedIndex % numOfItems) {\n            var node = _this.uiRefCurrent.getItemNode(_this.lastFocusedIndex);\n\n            if (node) {\n              node.blur();\n            }\n          }\n\n          _this.nodeIndexToBeFocused = null;\n          _this.lastFocusedIndex = focusedIndex;\n\n          if (primary.clientSize >= primary.itemSize) {\n            if (gridPosition.primaryPosition > scrollPosition + offsetToClientEnd) {\n              // forward over\n              gridPosition.primaryPosition -= pageScroll ? 0 : offsetToClientEnd;\n            } else if (gridPosition.primaryPosition >= scrollPosition) {\n              // inside of client\n              if (type === JS) {\n                gridPosition.primaryPosition = scrollPosition;\n              } else {\n                // This code uses the trick to change the target position slightly which will not affect the actual result\n                // since a browser ignore `scrollTo` method if the target position is same as the current position.\n                gridPosition.primaryPosition = scrollPosition + (_this.uiRefCurrent.scrollPosition === scrollPosition ? 0.1 : 0);\n              }\n            } else {\n              // backward over\n              gridPosition.primaryPosition -= pageScroll ? offsetToClientEnd : 0;\n            }\n          } // Since the result is used as a target position to be scrolled,\n          // scrondaryPosition should be 0 here.\n\n\n          gridPosition.secondaryPosition = 0;\n          return _this.uiRefCurrent.gridPositionToItemPosition(gridPosition);\n        }\n      };\n\n      _this.shouldPreventScrollByFocus = function () {\n        return type === JS ? _this.isScrolledBy5way : _this.isScrolledBy5way || _this.isScrolledByJump;\n      };\n\n      _this.shouldPreventOverscrollEffect = function () {\n        return _this.isWrappedBy5way;\n      };\n\n      _this.setLastFocusedNode = function (node) {\n        _this.lastFocusedIndex = node.dataset && getNumberValue(node.dataset.index);\n      };\n\n      _this.updateStatesAndBounds = function (_ref7) {\n        var cbScrollTo = _ref7.cbScrollTo,\n            dataSize = _ref7.dataSize,\n            moreInfo = _ref7.moreInfo,\n            numOfItems = _ref7.numOfItems;\n\n        var _assertThisInitialize3 = _assertThisInitialized(_this),\n            preservedIndex = _assertThisInitialize3.preservedIndex;\n\n        if (_this.restoreLastFocused && numOfItems > 0 && preservedIndex < dataSize && (preservedIndex < moreInfo.firstVisibleIndex || preservedIndex > moreInfo.lastVisibleIndex)) {\n          // If we need to restore last focus and the index is beyond the screen,\n          // we call `scrollTo` to create DOM for it.\n          cbScrollTo({\n            index: preservedIndex,\n            animate: false,\n            focus: true\n          });\n          _this.isScrolledByJump = true;\n          return true;\n        } else {\n          return false;\n        }\n      };\n\n      _this.getScrollBounds = function () {\n        return _this.uiRefCurrent.getScrollBounds();\n      };\n\n      _this.getComponentProps = function (index) {\n        return index === _this.nodeIndexToBeFocused ? {\n          ref: function ref(_ref8) {\n            return _this.initItemRef(_ref8, index);\n          }\n        } : {};\n      };\n\n      _this.initUiRef = function (ref) {\n        if (ref) {\n          _this.uiRefCurrent = ref;\n\n          _this.props.initUiChildRef(ref);\n        }\n      };\n\n      var _spotlightId = props.spotlightId;\n\n      if (_spotlightId) {\n        _this.configureSpotlight(_spotlightId);\n      }\n\n      _this.pause = new _Pause[\"default\"]('VirtualListBase');\n      return _this;\n    }\n\n    _createClass(VirtualListCore, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        var containerNode = this.uiRefCurrent.containerRef.current;\n\n        if (type === JS) {\n          // prevent native scrolling by Spotlight\n          this.preventScroll = function () {\n            containerNode.scrollTop = 0;\n            containerNode.scrollLeft = _this2.props.rtl ? containerNode.scrollWidth : 0;\n          };\n\n          if (containerNode && containerNode.addEventListener) {\n            containerNode.addEventListener('scroll', this.preventScroll);\n          }\n        }\n\n        if (containerNode && containerNode.addEventListener) {\n          containerNode.addEventListener('keydown', this.onKeyDown);\n          containerNode.addEventListener('keyup', this.onKeyUp);\n        }\n\n        setTimeout(function () {\n          _this2.restoreFocus();\n        }, 0);\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        if (prevProps.spotlightId !== this.props.spotlightId) {\n          this.configureSpotlight(this.props.spotlightId);\n        }\n\n        this.restoreFocus();\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        var containerNode = this.uiRefCurrent.containerRef.current;\n\n        if (type === JS) {\n          // remove a function for preventing native scrolling by Spotlight\n          if (containerNode && containerNode.removeEventListener) {\n            containerNode.removeEventListener('scroll', this.preventScroll);\n          }\n        }\n\n        if (containerNode && containerNode.removeEventListener) {\n          containerNode.removeEventListener('keydown', this.onKeyDown);\n          containerNode.removeEventListener('keyup', this.onKeyUp);\n        }\n\n        this.pause.resume();\n        SpotlightAccelerator.reset();\n        this.setContainerDisabled(false);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this3 = this;\n\n        var _this$props6 = this.props,\n            _itemRenderer = _this$props6.itemRenderer,\n            _itemsRenderer = _this$props6.itemsRenderer,\n            rest = _objectWithoutProperties(_this$props6, [\"itemRenderer\", \"itemsRenderer\"]),\n            needsScrollingPlaceholder = this.isNeededScrollingPlaceholder();\n\n        delete rest.initUiChildRef;\n        delete rest.isItemDisabled;\n        delete rest.spotlightId;\n        delete rest.wrap;\n        return _react[\"default\"].createElement(UiBase, Object.assign({}, rest, {\n          getComponentProps: this.getComponentProps,\n          itemRenderer: function itemRenderer(_ref9) {\n            var _objectSpread2;\n\n            var index = _ref9.index,\n                itemRest = _objectWithoutProperties(_ref9, [\"index\"]);\n\n            return (// eslint-disable-line react/jsx-no-bind\n              _itemRenderer(_objectSpread({}, itemRest, (_objectSpread2 = {}, _defineProperty(_objectSpread2, _Scrollable.dataIndexAttribute, index), _defineProperty(_objectSpread2, \"index\", index), _objectSpread2)))\n            );\n          },\n          ref: this.initUiRef,\n          updateStatesAndBounds: this.updateStatesAndBounds,\n          itemsRenderer: function itemsRenderer(props) {\n            // eslint-disable-line react/jsx-no-bind\n            return _itemsRenderer(_objectSpread({}, props, {\n              handlePlaceholderFocus: _this3.handlePlaceholderFocus,\n              needsScrollingPlaceholder: needsScrollingPlaceholder\n            }));\n          }\n        }));\n      }\n    }]);\n\n    return VirtualListCore;\n  }(_react.Component), _class.propTypes =\n  /** @lends moonstone/VirtualList.VirtualListCore.prototype */\n  {\n    /**\n     * The `render` function called for each item in the list.\n     *\n     * > NOTE: The list does NOT always render a component whenever its render function is called\n     * due to performance optimization.\n     *\n     * Usage:\n     * ```\n     * renderItem = ({index, ...rest}) => {\n     * \treturn (\n     * \t\t<MyComponent index={index} {...rest} />\n     * \t);\n     * }\n     * ```\n     *\n     * @type {Function}\n     * @param {Object} event\n     * @param {Number} event.data-index It is required for Spotlight 5-way navigation. Pass to the root element in the component.\n     * @param {Number} event.index The index number of the component to render\n     * @param {Number} event.key It MUST be passed as a prop to the root element in the component for DOM recycling.\n     *\n     * @required\n     * @public\n     */\n    itemRenderer: _propTypes[\"default\"].func.isRequired,\n\n    /**\n     * The render function for the items.\n     *\n     * @type {Function}\n     * @required\n     * @private\n     */\n    itemsRenderer: _propTypes[\"default\"].func.isRequired,\n\n    /**\n     * Callback method of scrollTo.\n     * Normally, [Scrollable]{@link ui/Scrollable.Scrollable} should set this value.\n     *\n     * @type {Function}\n     * @private\n     */\n    cbScrollTo: _propTypes[\"default\"].func,\n\n    /**\n     * Size of the data.\n     *\n     * @type {Number}\n     * @default 0\n     * @public\n     */\n    dataSize: _propTypes[\"default\"].number,\n\n    /**\n     * Passes the instance of [VirtualList]{@link ui/VirtualList.VirtualList}.\n     *\n     * @type {Object}\n     * @param {Object} ref\n     * @private\n     */\n    initUiChildRef: _propTypes[\"default\"].func,\n\n    /**\n     * The Function that returns `true` if the item at the index is disabled.\n     * It is used to navigate a list properly with 5 way keys, page up key,\n     * and page down key. If it is not supplied, it assumes that no items are disabled.\n     *\n     * Usage:\n     * ```\n     * isItemDisabled = (index) => (this.items[index].disabled)\n     * render = () => {\n     * \treturn (\n     * \t\t<VirtualList\n     * \t\t\tdataSize={this.items.length}\n     * \t\t\tisItemDisabled={isItemDisabled}\n     * \t\t\titemRenderer={this.renderItem}\n     * \t\t\titemSize={this.itemSize}\n     * \t\t/>\n     * \t);\n     * }\n     * ```\n     *\n     * @type {Function}\n     * @param {Number} index\n     * @public\n     */\n    isItemDisabled: _propTypes[\"default\"].func,\n\n    /*\n     * It scrolls by page when `true`, by item when `false`.\n     *\n     * @type {Boolean}\n     * @default false\n     * @private\n     */\n    pageScroll: _propTypes[\"default\"].bool,\n\n    /**\n     * `true` if rtl, `false` if ltr.\n     * Normally, [Scrollable]{@link ui/Scrollable.Scrollable} should set this value.\n     *\n     * @type {Boolean}\n     * @private\n     */\n    rtl: _propTypes[\"default\"].bool,\n\n    /**\n     * Spacing between items.\n     *\n     * @type {Number}\n     * @default 0\n     * @public\n     */\n    spacing: _propTypes[\"default\"].number,\n\n    /**\n     * Spotlight Id. It would be the same with [Scrollable]{@link ui/Scrollable.Scrollable}'s.\n     *\n     * @type {String}\n     * @private\n     */\n    spotlightId: _propTypes[\"default\"].string,\n\n    /**\n     * When it's `true` and the spotlight focus cannot move to the given direction anymore by 5-way keys,\n     * a list is scrolled with an animation to the other side and the spotlight focus moves in wraparound manner.\n     *\n     * When it's `'noAnimation'`, the spotlight focus moves in wraparound manner as same as when it's `true`\n     * except that a list is scrolled without an animation.\n     *\n     * @type {Boolean|String}\n     * @default false\n     * @public\n     */\n    wrap: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].bool, _propTypes[\"default\"].oneOf(['noAnimation'])])\n  }, _class.defaultProps = {\n    dataSize: 0,\n    isItemDisabled: isItemDisabledDefault,\n    pageScroll: false,\n    spacing: 0,\n    wrap: false\n  }, _temp;\n};\n/**\n * A Moonstone-styled base component for [VirtualList]{@link moonstone/VirtualList.VirtualList} and\n * [VirtualGridList]{@link moonstone/VirtualList.VirtualGridList}.\n *\n * @class VirtualListBase\n * @memberof moonstone/VirtualList\n * @extends ui/VirtualList.VirtualListBase\n * @ui\n * @public\n */\n\n\nvar VirtualListBase = VirtualListBaseFactory(JS);\nexports.VirtualListBase = VirtualListBase;\nVirtualListBase.displayName = 'VirtualListBase';\n/**\n * Activates the component for voice control.\n *\n * @name data-webos-voice-focused\n * @memberof moonstone/VirtualList.VirtualListBase.prototype\n * @type {Boolean}\n * @public\n */\n\n/**\n * The voice control group label.\n *\n * @name data-webos-voice-group-label\n * @memberof moonstone/VirtualList.VirtualListBase.prototype\n * @type {String}\n * @public\n */\n\n/**\n * A Moonstone-styled base component for [VirtualListNative]{@link moonstone/VirtualList.VirtualListNative} and\n * [VirtualGridListNative]{@link moonstone/VirtualList.VirtualGridListNative}.\n *\n * @class VirtualListBaseNative\n * @memberof moonstone/VirtualList\n * @extends ui/VirtualList.VirtualListBaseNative\n * @ui\n * @private\n */\n\nvar VirtualListBaseNative = VirtualListBaseFactory(Native);\nexports.VirtualListBaseNative = VirtualListBaseNative;\nVirtualListBaseNative.displayName = 'VirtualListBaseNative';\n\nvar ScrollableVirtualList = function ScrollableVirtualList(props) {\n  return (// eslint-disable-line react/jsx-no-bind\n    _react[\"default\"].createElement(_Scrollable.Scrollable, Object.assign({}, props, {\n      childRenderer: function childRenderer(childProps) {\n        return (// eslint-disable-line react/jsx-no-bind\n          _react[\"default\"].createElement(VirtualListBase, Object.assign({}, childProps, {\n            itemsRenderer: function itemsRenderer(_ref10) {\n              var cc = _ref10.cc,\n                  handlePlaceholderFocus = _ref10.handlePlaceholderFocus,\n                  initUiItemContainerRef = _ref10.initItemContainerRef,\n                  needsScrollingPlaceholder = _ref10.needsScrollingPlaceholder,\n                  primary = _ref10.primary;\n              return (// eslint-disable-line react/jsx-no-bind\n                [cc.length ? _react[\"default\"].createElement(\"div\", {\n                  key: \"0\",\n                  ref: initUiItemContainerRef,\n                  role: \"list\"\n                }, cc) : null, primary ? null : _react[\"default\"].createElement(SpotlightPlaceholder, {\n                  \"data-index\": 0,\n                  \"data-vl-placeholder\": true,\n                  key: \"1\",\n                  onFocus: handlePlaceholderFocus\n                }), needsScrollingPlaceholder ? _react[\"default\"].createElement(SpotlightPlaceholder, {\n                  key: \"2\"\n                }) : null]\n              );\n            }\n          }))\n        );\n      }\n    }))\n  );\n};\n\nexports.ScrollableVirtualList = ScrollableVirtualList;\nScrollableVirtualList.propTypes =\n/** @lends moonstone/VirtualList.VirtualListBase.prototype */\n{\n  /**\n   * Direction of the list.\n   *\n   * Valid values are:\n   * * `'horizontal'`, and\n   * * `'vertical'`.\n   *\n   * @type {String}\n   * @default 'vertical'\n   * @public\n   */\n  direction: _propTypes[\"default\"].oneOf(['horizontal', 'vertical'])\n};\nScrollableVirtualList.defaultProps = {\n  direction: 'vertical'\n};\n\nvar ScrollableVirtualListNative = function ScrollableVirtualListNative(props) {\n  return _react[\"default\"].createElement(_ScrollableNative[\"default\"], Object.assign({}, props, {\n    childRenderer: function childRenderer(childProps) {\n      return (// eslint-disable-line react/jsx-no-bind\n        _react[\"default\"].createElement(VirtualListBaseNative, Object.assign({}, childProps, {\n          itemsRenderer: function itemsRenderer(_ref11) {\n            var cc = _ref11.cc,\n                handlePlaceholderFocus = _ref11.handlePlaceholderFocus,\n                initUiItemContainerRef = _ref11.initItemContainerRef,\n                needsScrollingPlaceholder = _ref11.needsScrollingPlaceholder,\n                primary = _ref11.primary;\n            return (// eslint-disable-line react/jsx-no-bind\n              [cc.length ? _react[\"default\"].createElement(\"div\", {\n                key: \"0\",\n                ref: initUiItemContainerRef,\n                role: \"list\"\n              }, cc) : null, primary ? null : _react[\"default\"].createElement(SpotlightPlaceholder, {\n                \"data-index\": 0,\n                \"data-vl-placeholder\": true,\n                key: \"1\",\n                onFocus: handlePlaceholderFocus\n              }), needsScrollingPlaceholder ? _react[\"default\"].createElement(SpotlightPlaceholder, {\n                key: \"2\"\n              }) : null]\n            );\n          }\n        }))\n      );\n    }\n  }));\n};\n\nexports.ScrollableVirtualListNative = ScrollableVirtualListNative;\nScrollableVirtualListNative.propTypes =\n/** @lends moonstone/VirtualList.VirtualListBaseNative.prototype */\n{\n  /**\n   * Direction of the list.\n   *\n   * Valid values are:\n   * * `'horizontal'`, and\n   * * `'vertical'`.\n   *\n   * @type {String}\n   * @default 'vertical'\n   * @public\n   */\n  direction: _propTypes[\"default\"].oneOf(['horizontal', 'vertical'])\n};\nScrollableVirtualListNative.defaultProps = {\n  direction: 'vertical'\n};\nvar _default = VirtualListBase;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"module"}