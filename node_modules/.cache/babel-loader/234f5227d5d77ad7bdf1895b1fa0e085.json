{"ast":null,"code":"\"use strict\";\n\nfunction _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ScrollableNative = exports.ScrollableBaseNative = exports[\"default\"] = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _ScrollableNative = require(\"@enact/ui/Scrollable/ScrollableNative\");\n\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\n\nvar _target = require(\"@enact/spotlight/src/target\");\n\nvar _util = require(\"@enact/core/util\");\n\nvar _platform = _interopRequireDefault(require(\"@enact/core/platform\"));\n\nvar _handle = require(\"@enact/core/handle\");\n\nvar _I18nDecorator = require(\"@enact/i18n/I18nDecorator/I18nDecorator\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _SpotlightContainerDecorator = _interopRequireDefault(require(\"@enact/spotlight/SpotlightContainerDecorator\"));\n\nvar _$L = _interopRequireDefault(require(\"../internal/$L\"));\n\nvar _Scrollbar = _interopRequireDefault(require(\"./Scrollbar\"));\n\nvar _Skinnable = _interopRequireDefault(require(\"../Skinnable\"));\n\nvar _OverscrollEffectModule = _interopRequireDefault(require(\"./OverscrollEffect.module.css\"));\n\nvar _ScrollbarModule = _interopRequireDefault(require(\"./Scrollbar.module.css\"));\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj[\"default\"] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar epsilon = _ScrollableNative.constants.epsilon,\n    isPageDown = _ScrollableNative.constants.isPageDown,\n    isPageUp = _ScrollableNative.constants.isPageUp,\n    overscrollTypeDone = _ScrollableNative.constants.overscrollTypeDone,\n    overscrollTypeNone = _ScrollableNative.constants.overscrollTypeNone,\n    overscrollTypeOnce = _ScrollableNative.constants.overscrollTypeOnce,\n    scrollWheelPageMultiplierForMaxPixel = _ScrollableNative.constants.scrollWheelPageMultiplierForMaxPixel,\n    overscrollRatioPrefix = '--scrollable-overscroll-ratio-',\n    overscrollTimeout = 300,\n    paginationPageMultiplier = 0.8,\n    reverseDirections = {\n  down: 'up',\n  up: 'down'\n};\n\nvar navigableFilter = function navigableFilter(elem) {\n  if (!_spotlight[\"default\"].getPointerMode() && // ignore containers passed as their id\n  typeof elem !== 'string' && elem.classList.contains(_ScrollbarModule[\"default\"].scrollButton)) {\n    return false;\n  }\n};\n\nvar configureSpotlightContainer = function configureSpotlightContainer(_ref) {\n  var spotlightId = _ref['data-spotlight-id'],\n      focusableScrollbar = _ref.focusableScrollbar;\n\n  _spotlight[\"default\"].set(spotlightId, {\n    navigableFilter: focusableScrollbar ? null : navigableFilter\n  });\n};\n/**\n * A Moonstone-styled native component that provides horizontal and vertical scrollbars.\n *\n * @class ScrollableBaseNative\n * @memberof moonstone/ScrollableNative\n * @extends ui/Scrollable.ScrollableBaseNative\n * @ui\n * @private\n */\n\n\nvar ScrollableBaseNative =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ScrollableBaseNative, _Component);\n\n  function ScrollableBaseNative(props) {\n    var _this;\n\n    _classCallCheck(this, ScrollableBaseNative);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ScrollableBaseNative).call(this, props));\n    _this.isWheeling = false;\n    _this.lastScrollPositionOnFocus = null;\n    _this.indexToFocus = null;\n    _this.nodeToFocus = null;\n    _this.isVoiceControl = false;\n    _this.voiceControlDirection = 'vertical';\n    _this.overscrollJobs = {\n      horizontal: {\n        before: null,\n        after: null\n      },\n      vertical: {\n        before: null,\n        after: null\n      }\n    };\n\n    _this.onMouseDown = function (ev) {\n      if (_this.props['data-spotlight-container-disabled']) {\n        ev.preventDefault();\n      } else {\n        _this.childRef.current.setContainerDisabled(false);\n      }\n    };\n\n    _this.onFlick = function (_ref2) {\n      var direction = _ref2.direction;\n\n      var bounds = _this.uiRef.current.getScrollBounds();\n\n      var focusedItem = _spotlight[\"default\"].getCurrent();\n\n      if (focusedItem) {\n        focusedItem.blur();\n      }\n\n      if ((direction === 'vertical' && _this.uiRef.current.canScrollVertically(bounds) || direction === 'horizontal' && _this.uiRef.current.canScrollHorizontally(bounds)) && !_this.props['data-spotlight-container-disabled']) {\n        _this.childRef.current.setContainerDisabled(true);\n      }\n    };\n\n    _this.onTouchStart = function () {\n      var focusedItem = _spotlight[\"default\"].getCurrent(),\n          _this$uiRef$current = _this.uiRef.current,\n          horizontalScrollbarRef = _this$uiRef$current.horizontalScrollbarRef,\n          verticalScrollbarRef = _this$uiRef$current.verticalScrollbarRef,\n          isHorizontalScrollButtonFocused = horizontalScrollbarRef.current && horizontalScrollbarRef.current.isOneOfScrollButtonsFocused(),\n          isVerticalScrollButtonFocused = verticalScrollbarRef.current && verticalScrollbarRef.current.isOneOfScrollButtonsFocused();\n\n      if (focusedItem && !isHorizontalScrollButtonFocused && !isVerticalScrollButtonFocused) {\n        focusedItem.blur();\n      }\n    };\n\n    _this.onWheel = function (ev) {\n      var overscrollEffectRequired = _this.props.overscrollEffectOn.wheel,\n          bounds = _this.uiRef.current.getScrollBounds(),\n          canScrollHorizontally = _this.uiRef.current.canScrollHorizontally(bounds),\n          canScrollVertically = _this.uiRef.current.canScrollVertically(bounds),\n          eventDeltaMode = ev.deltaMode,\n          eventDelta = -ev.wheelDeltaY || ev.deltaY;\n\n      var delta = 0,\n          needToHideThumb = false;\n\n      if (typeof window !== 'undefined') {\n        window.document.activeElement.blur();\n      }\n\n      _this.uiRef.current.showThumb(bounds); // FIXME This routine is a temporary support for horizontal wheel scroll.\n      // FIXME If web engine supports horizontal wheel, this routine should be refined or removed.\n\n\n      if (canScrollVertically) {\n        // This routine handles wheel events on scrollbars for vertical scroll.\n        if (eventDelta < 0 && _this.uiRef.current.scrollTop > 0 || eventDelta > 0 && _this.uiRef.current.scrollTop < bounds.maxTop) {\n          var _this$uiRef$current2 = _this.uiRef.current,\n              horizontalScrollbarRef = _this$uiRef$current2.horizontalScrollbarRef,\n              verticalScrollbarRef = _this$uiRef$current2.verticalScrollbarRef;\n\n          if (!_this.isWheeling) {\n            if (!_this.props['data-spotlight-container-disabled']) {\n              _this.childRef.current.setContainerDisabled(true);\n            }\n\n            _this.isWheeling = true;\n          } // Not to check if ev.target is a descendant of a wrapped component which may have a lot of nodes in it.\n\n\n          if (horizontalScrollbarRef.current && horizontalScrollbarRef.current.getContainerRef().current.contains(ev.target) || verticalScrollbarRef.current && verticalScrollbarRef.current.getContainerRef().current.contains(ev.target)) {\n            delta = _this.uiRef.current.calculateDistanceByWheel(eventDeltaMode, eventDelta, bounds.clientHeight * scrollWheelPageMultiplierForMaxPixel);\n            needToHideThumb = !delta;\n          } else if (overscrollEffectRequired) {\n            _this.uiRef.current.checkAndApplyOverscrollEffect('vertical', eventDelta > 0 ? 'after' : 'before', overscrollTypeOnce);\n          }\n        } else {\n          if (overscrollEffectRequired && (eventDelta < 0 && _this.uiRef.current.scrollTop <= 0 || eventDelta > 0 && _this.uiRef.current.scrollTop >= bounds.maxTop)) {\n            _this.uiRef.current.applyOverscrollEffect('vertical', eventDelta > 0 ? 'after' : 'before', overscrollTypeOnce, 1);\n          }\n\n          needToHideThumb = true;\n        }\n      } else if (canScrollHorizontally) {\n        // this routine handles wheel events on any children for horizontal scroll.\n        if (eventDelta < 0 && _this.uiRef.current.scrollLeft > 0 || eventDelta > 0 && _this.uiRef.current.scrollLeft < bounds.maxLeft) {\n          if (!_this.isWheeling) {\n            if (!_this.props['data-spotlight-container-disabled']) {\n              _this.childRef.current.setContainerDisabled(true);\n            }\n\n            _this.isWheeling = true;\n          }\n\n          delta = _this.uiRef.current.calculateDistanceByWheel(eventDeltaMode, eventDelta, bounds.clientWidth * scrollWheelPageMultiplierForMaxPixel);\n          needToHideThumb = !delta;\n        } else {\n          if (overscrollEffectRequired && (eventDelta < 0 && _this.uiRef.current.scrollLeft <= 0 || eventDelta > 0 && _this.uiRef.current.scrollLeft >= bounds.maxLeft)) {\n            _this.uiRef.current.applyOverscrollEffect('horizontal', eventDelta > 0 ? 'after' : 'before', overscrollTypeOnce, 1);\n          }\n\n          needToHideThumb = true;\n        }\n      }\n\n      if (delta !== 0) {\n        /* prevent native scrolling feature for vertical direction */\n        ev.preventDefault();\n        var direction = Math.sign(delta); // Not to accumulate scroll position if wheel direction is different from hold direction\n\n        if (direction !== _this.uiRef.current.wheelDirection) {\n          _this.uiRef.current.isScrollAnimationTargetAccumulated = false;\n          _this.uiRef.current.wheelDirection = direction;\n        }\n\n        _this.uiRef.current.scrollToAccumulatedTarget(delta, canScrollVertically, overscrollEffectRequired);\n      }\n\n      if (needToHideThumb) {\n        _this.uiRef.current.startHidingThumb();\n      }\n    };\n\n    _this.start = function (animate) {\n      if (!animate) {\n        _this.focusOnItem();\n      }\n    };\n\n    _this.startScrollOnFocus = function (pos) {\n      if (pos) {\n        var top = pos.top,\n            left = pos.left,\n            bounds = _this.uiRef.current.getScrollBounds(),\n            scrollHorizontally = bounds.maxLeft > 0 && Math.abs(left - _this.uiRef.current.scrollLeft) > epsilon,\n            scrollVertically = bounds.maxTop > 0 && Math.abs(top - _this.uiRef.current.scrollTop) > epsilon;\n\n        if (scrollHorizontally || scrollVertically) {\n          _this.uiRef.current.start({\n            targetX: left,\n            targetY: top,\n            animate: _this.animateOnFocus,\n            overscrollEffect: _this.props.overscrollEffectOn[_this.uiRef.current.lastInputType] && (!_this.childRef.current.shouldPreventOverscrollEffect || !_this.childRef.current.shouldPreventOverscrollEffect())\n          });\n\n          _this.lastScrollPositionOnFocus = pos;\n        }\n      }\n    };\n\n    _this.calculateAndScrollTo = function () {\n      var spotItem = _spotlight[\"default\"].getCurrent(),\n          positionFn = _this.childRef.current.calculatePositionOnFocus,\n          containerRef = _this.uiRef.current.childRefCurrent.containerRef;\n\n      if (spotItem && positionFn && containerRef.current && containerRef.current.contains(spotItem)) {\n        var lastPos = _this.lastScrollPositionOnFocus;\n        var pos; // If scroll animation is ongoing, we need to pass last target position to\n        // determine correct scroll position.\n\n        if (_this.uiRef.current.scrolling && lastPos) {\n          pos = positionFn({\n            item: spotItem,\n            scrollPosition: _this.props.direction !== 'horizontal' ? lastPos.top : lastPos.left\n          });\n        } else {\n          // scrollInfo passes in current `scrollHeight` and `scrollTop` before calculations\n          var scrollInfo = {\n            previousScrollHeight: _this.uiRef.current.bounds.scrollHeight,\n            scrollTop: _this.uiRef.current.scrollTop\n          };\n          pos = positionFn({\n            item: spotItem,\n            scrollInfo: scrollInfo\n          });\n        }\n\n        if (pos && (pos.left !== _this.uiRef.current.scrollLeft || pos.top !== _this.uiRef.current.scrollTop)) {\n          _this.startScrollOnFocus(pos);\n        } // update `scrollHeight`\n\n\n        _this.uiRef.current.bounds.scrollHeight = _this.uiRef.current.getScrollBounds().scrollHeight;\n      }\n    };\n\n    _this.onFocus = function (ev) {\n      var isDragging = _this.uiRef.current.isDragging,\n          shouldPreventScrollByFocus = _this.childRef.current.shouldPreventScrollByFocus ? _this.childRef.current.shouldPreventScrollByFocus() : false;\n\n      if (!_spotlight[\"default\"].getPointerMode()) {\n        _this.alertThumb();\n      }\n\n      if (!(shouldPreventScrollByFocus || _spotlight[\"default\"].getPointerMode() || isDragging)) {\n        var item = ev.target,\n            positionFn = _this.childRef.current.calculatePositionOnFocus,\n            spotItem = _spotlight[\"default\"].getCurrent();\n\n        if (item && item === spotItem && positionFn) {\n          _this.calculateAndScrollTo();\n        }\n      } else if (_this.childRef.current.setLastFocusedNode) {\n        _this.childRef.current.setLastFocusedNode(ev.target);\n      }\n    };\n\n    _this.scrollByPage = function (direction) {\n      // Only scroll by page when the vertical scrollbar is visible. Otherwise, treat the\n      // scroller as a plain container\n      if (!_this.uiRef.current.state.isVerticalScrollbarVisible) {\n        return false;\n      }\n\n      var _this$uiRef$current3 = _this.uiRef.current,\n          childRefCurrent = _this$uiRef$current3.childRefCurrent,\n          containerRef = _this$uiRef$current3.containerRef,\n          focusedItem = _spotlight[\"default\"].getCurrent();\n\n      _this.uiRef.current.lastInputType = 'pageKey'; // Should skip scroll by page when focusedItem is paging control button of Scrollbar\n\n      if (focusedItem && childRefCurrent.containerRef.current.contains(focusedItem)) {\n        var // VirtualList and Scroller have a spotlightId on containerRef\n        spotlightId = containerRef.current.dataset.spotlightId,\n            rDirection = reverseDirections[direction],\n            viewportBounds = containerRef.current.getBoundingClientRect(),\n            focusedItemBounds = focusedItem.getBoundingClientRect(),\n            endPoint = {\n          x: focusedItemBounds.left + focusedItemBounds.width / 2,\n          y: viewportBounds.top + (direction === 'up' ? focusedItemBounds.height / 2 - 1 : viewportBounds.height - focusedItemBounds.height / 2 + 1)\n        };\n        var next = null;\n        /* 1. Find spottable item in viewport */\n\n        next = (0, _target.getTargetByDirectionFromPosition)(rDirection, endPoint, spotlightId);\n\n        if (next !== focusedItem) {\n          _spotlight[\"default\"].focus(next);\n          /* 2. Find spottable item out of viewport */\n          // For Scroller\n\n        } else if (_this.childRef.current.scrollToNextPage) {\n          next = _this.childRef.current.scrollToNextPage({\n            direction: direction,\n            focusedItem: focusedItem,\n            reverseDirection: rDirection,\n            spotlightId: spotlightId\n          });\n\n          if (next !== null) {\n            _this.animateOnFocus = false;\n\n            _spotlight[\"default\"].focus(next);\n          } // For VirtualList\n\n        } else if (_this.childRef.current.scrollToNextItem) {\n          _this.childRef.current.scrollToNextItem({\n            direction: direction,\n            focusedItem: focusedItem,\n            reverseDirection: rDirection,\n            spotlightId: spotlightId\n          });\n        } // Need to check whether an overscroll effect is needed\n\n\n        return true;\n      }\n\n      return false;\n    };\n\n    _this.onKeyDown = function (ev) {\n      var overscrollEffectOn = _this.props.overscrollEffectOn,\n          keyCode = ev.keyCode,\n          repeat = ev.repeat;\n      var overscrollEffectRequired = false,\n          direction = null;\n      (0, _handle.forward)('onKeyDown', ev, _this.props);\n      _this.animateOnFocus = true;\n\n      if (isPageUp(keyCode) || isPageDown(keyCode)) {\n        ev.preventDefault();\n\n        if (!repeat && _this.hasFocus() && (_this.props.direction === 'vertical' || _this.props.direction === 'both')) {\n          _spotlight[\"default\"].setPointerMode(false);\n\n          direction = isPageUp(keyCode) ? 'up' : 'down';\n          overscrollEffectRequired = _this.scrollByPage(direction) && overscrollEffectOn.pageKey;\n        }\n      } else if (!_spotlight[\"default\"].getPointerMode() && !repeat && _this.hasFocus() && (0, _spotlight.getDirection)(keyCode)) {\n        var element = _spotlight[\"default\"].getCurrent();\n\n        direction = (0, _spotlight.getDirection)(keyCode);\n        _this.uiRef.current.lastInputType = 'arrowKey';\n        overscrollEffectRequired = overscrollEffectOn.arrowKey && !(element ? (0, _target.getTargetByDirectionFromElement)(direction, element) : null);\n\n        if (overscrollEffectRequired) {\n          var _this$uiRef$current4 = _this.uiRef.current,\n              horizontalScrollbarRef = _this$uiRef$current4.horizontalScrollbarRef,\n              verticalScrollbarRef = _this$uiRef$current4.verticalScrollbarRef;\n\n          if (horizontalScrollbarRef.current && horizontalScrollbarRef.current.getContainerRef().current.contains(element) || verticalScrollbarRef.current && verticalScrollbarRef.current.getContainerRef().current.contains(element)) {\n            overscrollEffectRequired = false;\n          }\n        }\n      }\n\n      if (direction && overscrollEffectRequired) {\n        /* if the spotlight focus will not move */\n        var orientation = direction === 'up' || direction === 'down' ? 'vertical' : 'horizontal',\n            bounds = _this.uiRef.current.getScrollBounds(),\n            scrollability = orientation === 'vertical' ? _this.uiRef.current.canScrollVertically(bounds) : _this.uiRef.current.canScrollHorizontally(bounds);\n\n        if (scrollability) {\n          var isRtl = _this.uiRef.current.state.rtl,\n              edge = direction === 'up' || !isRtl && direction === 'left' || isRtl && direction === 'right' ? 'before' : 'after';\n\n          _this.uiRef.current.checkAndApplyOverscrollEffect(orientation, edge, overscrollTypeOnce);\n        }\n      }\n    };\n\n    _this.onScrollbarButtonClick = function (_ref3) {\n      var isPreviousScrollButton = _ref3.isPreviousScrollButton,\n          isVerticalScrollBar = _ref3.isVerticalScrollBar;\n\n      var bounds = _this.uiRef.current.getScrollBounds(),\n          direction = isPreviousScrollButton ? -1 : 1,\n          pageDistance = direction * (isVerticalScrollBar ? bounds.clientHeight : bounds.clientWidth) * paginationPageMultiplier;\n\n      _this.uiRef.current.lastInputType = 'scrollbarButton';\n\n      if (direction !== _this.uiRef.current.wheelDirection) {\n        _this.uiRef.current.isScrollAnimationTargetAccumulated = false;\n        _this.uiRef.current.wheelDirection = direction;\n      }\n\n      _this.uiRef.current.scrollToAccumulatedTarget(pageDistance, isVerticalScrollBar, _this.props.overscrollEffectOn.scrollbarButton);\n    };\n\n    _this.scrollStopOnScroll = function () {\n      if (!_this.props['data-spotlight-container-disabled']) {\n        _this.childRef.current.setContainerDisabled(false);\n      }\n\n      _this.focusOnItem();\n\n      _this.lastScrollPositionOnFocus = null;\n      _this.isWheeling = false;\n\n      if (_this.isVoiceControl) {\n        _this.isVoiceControl = false;\n\n        _this.updateFocusAfterVoiceControl();\n      }\n    };\n\n    _this.scrollTo = function (opt) {\n      _this.indexToFocus = opt.focus && typeof opt.index === 'number' ? opt.index : null;\n      _this.nodeToFocus = opt.focus && opt.node instanceof Object && opt.node.nodeType === 1 ? opt.node : null;\n    };\n\n    _this.alertThumb = function () {\n      var bounds = _this.uiRef.current.getScrollBounds();\n\n      _this.uiRef.current.showThumb(bounds);\n\n      _this.uiRef.current.startHidingThumb();\n    };\n\n    _this.alertThumbAfterRendered = function () {\n      var spotItem = _spotlight[\"default\"].getCurrent();\n\n      if (!_spotlight[\"default\"].getPointerMode() && spotItem && _this.uiRef.current && _this.uiRef.current.childRefCurrent.containerRef.current.contains(spotItem) && _this.uiRef.current.isUpdatedScrollThumb) {\n        _this.alertThumb();\n      }\n    };\n\n    _this.handleScrollerUpdate = function () {\n      if (_this.uiRef.current.scrollToInfo === null) {\n        var scrollHeight = _this.uiRef.current.getScrollBounds().scrollHeight;\n\n        if (scrollHeight !== _this.uiRef.current.bounds.scrollHeight) {\n          _this.calculateAndScrollTo();\n        }\n      } // oddly, Scroller manages this.uiRef.current.bounds so if we don't update it here (it is also\n      // updated in calculateAndScrollTo but we might not have made it to that point), it will be\n      // out of date when we land back in this method next time.\n\n\n      _this.uiRef.current.bounds.scrollHeight = _this.uiRef.current.getScrollBounds().scrollHeight;\n    };\n\n    _this.clearOverscrollEffect = function (orientation, edge) {\n      _this.overscrollJobs[orientation][edge].startAfter(overscrollTimeout, orientation, edge, overscrollTypeNone, 0);\n\n      _this.uiRef.current.setOverscrollStatus(orientation, edge, overscrollTypeNone, 0);\n    };\n\n    _this.applyOverscrollEffect = function (orientation, edge, type, ratio) {\n      var nodeRef = _this.overscrollRefs[orientation].current;\n\n      if (nodeRef) {\n        nodeRef.style.setProperty(overscrollRatioPrefix + orientation + edge, ratio);\n\n        if (type === overscrollTypeOnce) {\n          _this.overscrollJobs[orientation][edge].start(orientation, edge, overscrollTypeDone, 0);\n        }\n      }\n    };\n\n    _this.createOverscrollJob = function (orientation, edge) {\n      if (!_this.overscrollJobs[orientation][edge]) {\n        _this.overscrollJobs[orientation][edge] = new _util.Job(_this.applyOverscrollEffect.bind(_assertThisInitialized(_this)), overscrollTimeout);\n      }\n    };\n\n    _this.stopOverscrollJob = function (orientation, edge) {\n      var job = _this.overscrollJobs[orientation][edge];\n\n      if (job) {\n        job.stop();\n      }\n    };\n\n    _this.addEventListeners = function (childContainerRef) {\n      if (childContainerRef.current && childContainerRef.current.addEventListener) {\n        childContainerRef.current.addEventListener('focusin', _this.onFocus);\n\n        if (_platform[\"default\"].webos) {\n          childContainerRef.current.addEventListener('webOSVoice', _this.onVoice);\n          childContainerRef.current.setAttribute('data-webos-voice-intent', 'Scroll');\n        }\n      }\n    };\n\n    _this.removeEventListeners = function (childContainerRef) {\n      if (childContainerRef.current && childContainerRef.current.removeEventListener) {\n        childContainerRef.current.removeEventListener('focusin', _this.onFocus);\n\n        if (_platform[\"default\"].webos) {\n          childContainerRef.current.removeEventListener('webOSVoice', _this.onVoice);\n          childContainerRef.current.removeAttribute('data-webos-voice-intent');\n        }\n      }\n    };\n\n    _this.updateFocusAfterVoiceControl = function () {\n      var spotItem = _spotlight[\"default\"].getCurrent();\n\n      if (spotItem && _this.uiRef.current.containerRef.current.contains(spotItem)) {\n        var viewportBounds = _this.uiRef.current.containerRef.current.getBoundingClientRect(),\n            spotItemBounds = spotItem.getBoundingClientRect(),\n            nodes = _spotlight[\"default\"].getSpottableDescendants(_this.uiRef.current.containerRef.current.dataset.spotlightId),\n            first = _this.voiceControlDirection === 'vertical' ? 'top' : 'left',\n            last = _this.voiceControlDirection === 'vertical' ? 'bottom' : 'right';\n\n        if (spotItemBounds[last] < viewportBounds[first] || spotItemBounds[first] > viewportBounds[last]) {\n          for (var i = 0; i < nodes.length; i++) {\n            var nodeBounds = nodes[i].getBoundingClientRect();\n\n            if (nodeBounds[first] > viewportBounds[first] && nodeBounds[last] < viewportBounds[last]) {\n              _spotlight[\"default\"].focus(nodes[i]);\n\n              break;\n            }\n          }\n        }\n      }\n    };\n\n    _this.isReachedEdge = function (scrollPos, ltrBound, rtlBound) {\n      var isRtl = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var bound = isRtl ? rtlBound : ltrBound;\n      return bound === 0 && scrollPos === 0 || bound > 0 && scrollPos >= bound - 1;\n    };\n\n    _this.onVoice = function (e) {\n      var isHorizontal = _this.props.direction === 'horizontal',\n          isRtl = _this.uiRef.current.state.rtl,\n          _this$uiRef$current5 = _this.uiRef.current,\n          scrollTop = _this$uiRef$current5.scrollTop,\n          scrollLeft = _this$uiRef$current5.scrollLeft,\n          _this$uiRef$current$g = _this.uiRef.current.getScrollBounds(),\n          maxLeft = _this$uiRef$current$g.maxLeft,\n          maxTop = _this$uiRef$current$g.maxTop,\n          verticalDirection = ['up', 'down', 'top', 'bottom'],\n          horizontalDirection = isRtl ? ['right', 'left', 'rightmost', 'leftmost'] : ['left', 'right', 'leftmost', 'rightmost'],\n          movement = ['previous', 'next', 'first', 'last'];\n\n      var scroll = e && e.detail && e.detail.scroll,\n          index = movement.indexOf(scroll);\n\n      if (index > -1) {\n        scroll = isHorizontal ? horizontalDirection[index] : verticalDirection[index];\n      }\n\n      _this.voiceControlDirection = verticalDirection.includes(scroll) && 'vertical' || horizontalDirection.includes(scroll) && 'horizontal' || null; // Case 1. Invalid direction\n\n      if (_this.voiceControlDirection === null) {\n        _this.isVoiceControl = false; // Case 2. Cannot scroll\n      } else if (['up', 'top'].includes(scroll) && _this.isReachedEdge(scrollTop, 0) || ['down', 'bottom'].includes(scroll) && _this.isReachedEdge(scrollTop, maxTop) || ['left', 'leftmost'].includes(scroll) && _this.isReachedEdge(scrollLeft, 0, maxLeft, isRtl) || ['right', 'rightmost'].includes(scroll) && _this.isReachedEdge(scrollLeft, maxLeft, 0, isRtl)) {\n        if (window.webOSVoiceReportActionResult) {\n          window.webOSVoiceReportActionResult({\n            voiceUi: {\n              exception: 'alreadyCompleted'\n            }\n          });\n          e.preventDefault();\n        } // Case 3. Can scroll\n\n      } else {\n        _this.isVoiceControl = true;\n\n        if (['up', 'down', 'left', 'right'].includes(scroll)) {\n          var isPreviousScrollButton = scroll === 'up' || scroll === 'left' && !isRtl || scroll === 'right' && isRtl;\n\n          _this.onScrollbarButtonClick({\n            isPreviousScrollButton: isPreviousScrollButton,\n            isVerticalScrollBar: verticalDirection.includes(scroll)\n          });\n        } else {\n          // ['top', 'bottom', 'leftmost', 'rightmost'].includes(scroll)\n          _this.uiRef.current.scrollTo({\n            align: verticalDirection.includes(scroll) && scroll || (scroll === 'leftmost' && isRtl || scroll === 'rightmost' && !isRtl) && 'right' || 'left'\n          });\n        }\n\n        e.preventDefault();\n      }\n    };\n\n    _this.scrollbarProps = {\n      cbAlertThumb: _this.alertThumbAfterRendered,\n      onNextScroll: _this.onScrollbarButtonClick,\n      onPrevScroll: _this.onScrollbarButtonClick\n    };\n    _this.overscrollRefs = {\n      horizontal: _react[\"default\"].createRef(),\n      vertical: _react[\"default\"].createRef()\n    };\n    _this.childRef = _react[\"default\"].createRef();\n    _this.uiRef = _react[\"default\"].createRef();\n    configureSpotlightContainer(props);\n    return _this;\n  }\n\n  _createClass(ScrollableBaseNative, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.createOverscrollJob('horizontal', 'before');\n      this.createOverscrollJob('horizontal', 'after');\n      this.createOverscrollJob('vertical', 'before');\n      this.createOverscrollJob('vertical', 'after');\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps['data-spotlight-id'] !== this.props['data-spotlight-id'] || prevProps.focusableScrollbar !== this.props.focusableScrollbar) {\n        configureSpotlightContainer(this.props);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopOverscrollJob('horizontal', 'before');\n      this.stopOverscrollJob('horizontal', 'after');\n      this.stopOverscrollJob('vertical', 'before');\n      this.stopOverscrollJob('vertical', 'after');\n    } // status\n\n  }, {\n    key: \"hasFocus\",\n    value: function hasFocus() {\n      var current = _spotlight[\"default\"].getCurrent();\n\n      if (!current) {\n        var spotlightId = _spotlight[\"default\"].getActiveContainer();\n\n        current = document.querySelector(\"[data-spotlight-id=\\\"\".concat(spotlightId, \"\\\"]\"));\n      }\n\n      return current && this.uiRef.current.containerRef.current.contains(current);\n    }\n  }, {\n    key: \"focusOnItem\",\n    value: function focusOnItem() {\n      var childRef = this.childRef;\n\n      if (this.indexToFocus !== null && typeof childRef.current.focusByIndex === 'function') {\n        childRef.current.focusByIndex(this.indexToFocus);\n        this.indexToFocus = null;\n      }\n\n      if (this.nodeToFocus !== null && typeof childRef.current.focusOnNode === 'function') {\n        childRef.current.focusOnNode(this.nodeToFocus);\n        this.nodeToFocus = null;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          childRenderer = _this$props.childRenderer,\n          spotlightContainer = _this$props['data-spotlight-container'],\n          spotlightContainerDisabled = _this$props['data-spotlight-container-disabled'],\n          spotlightId = _this$props['data-spotlight-id'],\n          focusableScrollbar = _this$props.focusableScrollbar,\n          scrollDownAriaLabel = _this$props.scrollDownAriaLabel,\n          scrollLeftAriaLabel = _this$props.scrollLeftAriaLabel,\n          scrollRightAriaLabel = _this$props.scrollRightAriaLabel,\n          scrollUpAriaLabel = _this$props.scrollUpAriaLabel,\n          rest = _objectWithoutProperties(_this$props, [\"childRenderer\", \"data-spotlight-container\", \"data-spotlight-container-disabled\", \"data-spotlight-id\", \"focusableScrollbar\", \"scrollDownAriaLabel\", \"scrollLeftAriaLabel\", \"scrollRightAriaLabel\", \"scrollUpAriaLabel\"]),\n          downButtonAriaLabel = scrollDownAriaLabel == null ? (0, _$L[\"default\"])('scroll down') : scrollDownAriaLabel,\n          upButtonAriaLabel = scrollUpAriaLabel == null ? (0, _$L[\"default\"])('scroll up') : scrollUpAriaLabel,\n          rightButtonAriaLabel = scrollRightAriaLabel == null ? (0, _$L[\"default\"])('scroll right') : scrollRightAriaLabel,\n          leftButtonAriaLabel = scrollLeftAriaLabel == null ? (0, _$L[\"default\"])('scroll left') : scrollLeftAriaLabel;\n\n      return _react[\"default\"].createElement(_ScrollableNative.ScrollableBaseNative, Object.assign({\n        noScrollByDrag: !_platform[\"default\"].touch\n      }, rest, {\n        addEventListeners: this.addEventListeners,\n        applyOverscrollEffect: this.applyOverscrollEffect,\n        clearOverscrollEffect: this.clearOverscrollEffect,\n        onFlick: this.onFlick,\n        onKeyDown: this.onKeyDown,\n        onMouseDown: this.onMouseDown,\n        onWheel: this.onWheel,\n        ref: this.uiRef,\n        removeEventListeners: this.removeEventListeners,\n        scrollStopOnScroll: this.scrollStopOnScroll,\n        scrollTo: this.scrollTo,\n        start: this.start,\n        containerRenderer: function containerRenderer(_ref4) {\n          var childComponentProps = _ref4.childComponentProps,\n              ChildWrapper = _ref4.childWrapper,\n              _ref4$childWrapperPro = _ref4.childWrapperProps,\n              contentClassName = _ref4$childWrapperPro.className,\n              restChildWrapperProps = _objectWithoutProperties(_ref4$childWrapperPro, [\"className\"]),\n              className = _ref4.className,\n              componentCss = _ref4.componentCss,\n              uiContainerRef = _ref4.containerRef,\n              horizontalScrollbarProps = _ref4.horizontalScrollbarProps,\n              initUiChildRef = _ref4.initChildRef,\n              isHorizontalScrollbarVisible = _ref4.isHorizontalScrollbarVisible,\n              isVerticalScrollbarVisible = _ref4.isVerticalScrollbarVisible,\n              rtl = _ref4.rtl,\n              scrollTo = _ref4.scrollTo,\n              style = _ref4.style,\n              verticalScrollbarProps = _ref4.verticalScrollbarProps;\n\n          return _react[\"default\"].createElement(\"div\", {\n            className: (0, _classnames[\"default\"])(className, _OverscrollEffectModule[\"default\"].scrollable),\n            \"data-spotlight-container\": spotlightContainer,\n            \"data-spotlight-container-disabled\": spotlightContainerDisabled,\n            \"data-spotlight-id\": spotlightId,\n            onTouchStart: _this2.onTouchStart,\n            ref: uiContainerRef,\n            style: style\n          }, _react[\"default\"].createElement(\"div\", {\n            className: (0, _classnames[\"default\"])(componentCss.container, _OverscrollEffectModule[\"default\"].overscrollFrame, _OverscrollEffectModule[\"default\"].vertical, isHorizontalScrollbarVisible ? _OverscrollEffectModule[\"default\"].horizontalScrollbarVisible : null),\n            ref: _this2.overscrollRefs.vertical\n          }, _react[\"default\"].createElement(ChildWrapper, Object.assign({\n            className: (0, _classnames[\"default\"])(contentClassName, _OverscrollEffectModule[\"default\"].overscrollFrame, _OverscrollEffectModule[\"default\"].horizontal),\n            ref: _this2.overscrollRefs.horizontal\n          }, restChildWrapperProps), childRenderer(_objectSpread({}, childComponentProps, {\n            cbScrollTo: scrollTo,\n            className: componentCss.scrollableFill,\n            initUiChildRef: initUiChildRef,\n            isVerticalScrollbarVisible: isVerticalScrollbarVisible,\n            onUpdate: _this2.handleScrollerUpdate,\n            ref: _this2.childRef,\n            rtl: rtl,\n            spotlightId: spotlightId\n          }))), isVerticalScrollbarVisible ? _react[\"default\"].createElement(_Scrollbar[\"default\"], Object.assign({}, verticalScrollbarProps, _this2.scrollbarProps, {\n            disabled: !isVerticalScrollbarVisible,\n            focusableScrollButtons: focusableScrollbar,\n            nextButtonAriaLabel: downButtonAriaLabel,\n            previousButtonAriaLabel: upButtonAriaLabel,\n            rtl: rtl\n          })) : null), isHorizontalScrollbarVisible ? _react[\"default\"].createElement(_Scrollbar[\"default\"], Object.assign({}, horizontalScrollbarProps, _this2.scrollbarProps, {\n            corner: isVerticalScrollbarVisible,\n            disabled: !isHorizontalScrollbarVisible,\n            focusableScrollButtons: focusableScrollbar,\n            nextButtonAriaLabel: rightButtonAriaLabel,\n            previousButtonAriaLabel: leftButtonAriaLabel,\n            rtl: rtl\n          })) : null);\n        }\n      }));\n    }\n  }]);\n\n  return ScrollableBaseNative;\n}(_react.Component);\n/**\n * A Moonstone-styled component that provides horizontal and vertical scrollbars.\n *\n * @class ScrollableNative\n * @memberof moonstone/ScrollableNative\n * @mixes spotlight/SpotlightContainerDecorator\n * @extends moonstone/Scrollable.ScrollableBaseNative\n * @ui\n * @private\n */\n\n\nexports.ScrollableBaseNative = ScrollableBaseNative;\nScrollableBaseNative.displayName = 'ScrollableNative';\nScrollableBaseNative.propTypes =\n/** @lends moonstone/ScrollableNative.ScrollableNative.prototype */\n{\n  /**\n   * Render function.\n   *\n   * @type {Function}\n   * @required\n   * @private\n   */\n  childRenderer: _propTypes[\"default\"].func.isRequired,\n\n  /**\n   * This is set to `true` by SpotlightContainerDecorator\n   *\n   * @type {Boolean}\n   * @private\n   */\n  'data-spotlight-container': _propTypes[\"default\"].bool,\n\n  /**\n   * `false` if the content of the list or the scroller could get focus\n   *\n   * @type {Boolean}\n   * @default false\n   * @private\n   */\n  'data-spotlight-container-disabled': _propTypes[\"default\"].bool,\n\n  /**\n   * This is passed onto the wrapped component to allow\n   * it to customize the spotlight container for its use case.\n   *\n   * @type {String}\n   * @private\n   */\n  'data-spotlight-id': _propTypes[\"default\"].string,\n\n  /**\n   * Direction of the list or the scroller.\n   * `'both'` could be only used for[Scroller]{@link moonstone/Scroller.Scroller}.\n   *\n   * Valid values are:\n   * * `'both'`,\n   * * `'horizontal'`, and\n   * * `'vertical'`.\n   *\n   * @type {String}\n   * @private\n   */\n  direction: _propTypes[\"default\"].oneOf(['both', 'horizontal', 'vertical']),\n\n  /**\n   * Allows 5-way navigation to the scrollbar controls. By default, 5-way will\n   * not move focus to the scrollbar controls.\n   *\n   * @type {Boolean}\n   * @default false\n   * @public\n   */\n  focusableScrollbar: _propTypes[\"default\"].bool,\n\n  /**\n   * Specifies overscroll effects shows on which type of inputs.\n   *\n   * @type {Object}\n   * @default {\n   *\tarrowKey: false,\n   *\tdrag: false,\n   *\tpageKey: false,\n   *\tscrollbarButton: false,\n   *\twheel: true\n   * }\n   * @private\n   */\n  overscrollEffectOn: _propTypes[\"default\"].shape({\n    arrowKey: _propTypes[\"default\"].bool,\n    drag: _propTypes[\"default\"].bool,\n    pageKey: _propTypes[\"default\"].bool,\n    scrollbarButton: _propTypes[\"default\"].bool,\n    wheel: _propTypes[\"default\"].bool\n  }),\n\n  /**\n   * Sets the hint string read when focusing the next button in the vertical scroll bar.\n   *\n   * @type {String}\n   * @default $L('scroll down')\n   * @public\n   */\n  scrollDownAriaLabel: _propTypes[\"default\"].string,\n\n  /**\n   * Sets the hint string read when focusing the previous button in the horizontal scroll bar.\n   *\n   * @type {String}\n   * @default $L('scroll left')\n   * @public\n   */\n  scrollLeftAriaLabel: _propTypes[\"default\"].string,\n\n  /**\n   * Sets the hint string read when focusing the next button in the horizontal scroll bar.\n   *\n   * @type {String}\n   * @default $L('scroll right')\n   * @public\n   */\n  scrollRightAriaLabel: _propTypes[\"default\"].string,\n\n  /**\n   * Sets the hint string read when focusing the previous button in the vertical scroll bar.\n   *\n   * @type {String}\n   * @default $L('scroll up')\n   * @public\n   */\n  scrollUpAriaLabel: _propTypes[\"default\"].string\n};\nScrollableBaseNative.defaultProps = {\n  'data-spotlight-container-disabled': false,\n  focusableScrollbar: false,\n  overscrollEffectOn: {\n    arrowKey: false,\n    drag: false,\n    pageKey: false,\n    scrollbarButton: false,\n    wheel: true\n  }\n};\nvar ScrollableNative = (0, _Skinnable[\"default\"])((0, _SpotlightContainerDecorator[\"default\"])({\n  overflow: true,\n  preserveId: true,\n  restrict: 'self-first'\n}, (0, _I18nDecorator.I18nContextDecorator)({\n  rtlProp: 'rtl'\n}, ScrollableBaseNative)));\nexports.ScrollableNative = ScrollableNative;\nvar _default = ScrollableNative;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/home/cdi/SteApp/node_modules/@enact/moonstone/Scrollable/ScrollableNative.js"],"names":["Object","defineProperty","exports","value","ScrollableNative","ScrollableBaseNative","_classnames","_interopRequireDefault","require","_ScrollableNative","_spotlight","_interopRequireWildcard","_target","_util","_platform","_handle","_I18nDecorator","_propTypes","_react","_SpotlightContainerDecorator","_$L","_Scrollbar","_Skinnable","_OverscrollEffectModule","_ScrollbarModule","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","_typeof","Symbol","iterator","constructor","_objectSpread","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","enumerable","forEach","_defineProperty","configurable","writable","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","_setPrototypeOf","p","epsilon","constants","isPageDown","isPageUp","overscrollTypeDone","overscrollTypeNone","overscrollTypeOnce","scrollWheelPageMultiplierForMaxPixel","overscrollRatioPrefix","overscrollTimeout","paginationPageMultiplier","reverseDirections","down","up","navigableFilter","elem","getPointerMode","classList","contains","scrollButton","configureSpotlightContainer","_ref","spotlightId","focusableScrollbar","_Component","_this","isWheeling","lastScrollPositionOnFocus","indexToFocus","nodeToFocus","isVoiceControl","voiceControlDirection","overscrollJobs","horizontal","before","after","vertical","onMouseDown","ev","preventDefault","childRef","current","setContainerDisabled","onFlick","_ref2","direction","bounds","uiRef","getScrollBounds","focusedItem","getCurrent","blur","canScrollVertically","canScrollHorizontally","onTouchStart","_this$uiRef$current","horizontalScrollbarRef","verticalScrollbarRef","isHorizontalScrollButtonFocused","isOneOfScrollButtonsFocused","isVerticalScrollButtonFocused","onWheel","overscrollEffectRequired","overscrollEffectOn","wheel","eventDeltaMode","deltaMode","eventDelta","wheelDeltaY","deltaY","delta","needToHideThumb","window","document","activeElement","showThumb","scrollTop","maxTop","_this$uiRef$current2","getContainerRef","calculateDistanceByWheel","clientHeight","checkAndApplyOverscrollEffect","applyOverscrollEffect","scrollLeft","maxLeft","clientWidth","Math","sign","wheelDirection","isScrollAnimationTargetAccumulated","scrollToAccumulatedTarget","startHidingThumb","start","animate","focusOnItem","startScrollOnFocus","pos","top","left","scrollHorizontally","abs","scrollVertically","targetX","targetY","animateOnFocus","overscrollEffect","lastInputType","shouldPreventOverscrollEffect","calculateAndScrollTo","spotItem","positionFn","calculatePositionOnFocus","containerRef","childRefCurrent","lastPos","scrolling","item","scrollPosition","scrollInfo","previousScrollHeight","scrollHeight","onFocus","isDragging","shouldPreventScrollByFocus","alertThumb","setLastFocusedNode","scrollByPage","state","isVerticalScrollbarVisible","_this$uiRef$current3","dataset","rDirection","viewportBounds","getBoundingClientRect","focusedItemBounds","endPoint","x","width","y","height","next","getTargetByDirectionFromPosition","focus","scrollToNextPage","reverseDirection","scrollToNextItem","onKeyDown","keyCode","repeat","forward","hasFocus","setPointerMode","pageKey","getDirection","element","arrowKey","getTargetByDirectionFromElement","_this$uiRef$current4","orientation","scrollability","isRtl","rtl","edge","onScrollbarButtonClick","_ref3","isPreviousScrollButton","isVerticalScrollBar","pageDistance","scrollbarButton","scrollStopOnScroll","updateFocusAfterVoiceControl","scrollTo","opt","index","node","nodeType","alertThumbAfterRendered","isUpdatedScrollThumb","handleScrollerUpdate","scrollToInfo","clearOverscrollEffect","startAfter","setOverscrollStatus","type","ratio","nodeRef","overscrollRefs","style","setProperty","createOverscrollJob","Job","bind","stopOverscrollJob","job","stop","addEventListeners","childContainerRef","addEventListener","webos","onVoice","setAttribute","removeEventListeners","removeEventListener","removeAttribute","spotItemBounds","nodes","getSpottableDescendants","first","last","nodeBounds","isReachedEdge","scrollPos","ltrBound","rtlBound","undefined","bound","e","isHorizontal","_this$uiRef$current5","_this$uiRef$current$g","verticalDirection","horizontalDirection","movement","scroll","detail","includes","webOSVoiceReportActionResult","voiceUi","exception","align","scrollbarProps","cbAlertThumb","onNextScroll","onPrevScroll","createRef","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","getActiveContainer","querySelector","focusByIndex","focusOnNode","render","_this2","_this$props","childRenderer","spotlightContainer","spotlightContainerDisabled","scrollDownAriaLabel","scrollLeftAriaLabel","scrollRightAriaLabel","scrollUpAriaLabel","rest","downButtonAriaLabel","upButtonAriaLabel","rightButtonAriaLabel","leftButtonAriaLabel","createElement","assign","noScrollByDrag","touch","ref","containerRenderer","_ref4","childComponentProps","ChildWrapper","childWrapper","_ref4$childWrapperPro","childWrapperProps","contentClassName","className","restChildWrapperProps","componentCss","uiContainerRef","horizontalScrollbarProps","initUiChildRef","initChildRef","isHorizontalScrollbarVisible","verticalScrollbarProps","scrollable","container","overscrollFrame","horizontalScrollbarVisible","cbScrollTo","scrollableFill","onUpdate","disabled","focusableScrollButtons","nextButtonAriaLabel","previousButtonAriaLabel","corner","Component","displayName","propTypes","func","isRequired","bool","string","oneOf","shape","drag","defaultProps","overflow","preserveId","restrict","I18nContextDecorator","rtlProp","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ScrollableNative = exports.ScrollableBaseNative = exports[\"default\"] = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _ScrollableNative = require(\"@enact/ui/Scrollable/ScrollableNative\");\n\nvar _spotlight = _interopRequireWildcard(require(\"@enact/spotlight\"));\n\nvar _target = require(\"@enact/spotlight/src/target\");\n\nvar _util = require(\"@enact/core/util\");\n\nvar _platform = _interopRequireDefault(require(\"@enact/core/platform\"));\n\nvar _handle = require(\"@enact/core/handle\");\n\nvar _I18nDecorator = require(\"@enact/i18n/I18nDecorator/I18nDecorator\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _SpotlightContainerDecorator = _interopRequireDefault(require(\"@enact/spotlight/SpotlightContainerDecorator\"));\n\nvar _$L = _interopRequireDefault(require(\"../internal/$L\"));\n\nvar _Scrollbar = _interopRequireDefault(require(\"./Scrollbar\"));\n\nvar _Skinnable = _interopRequireDefault(require(\"../Skinnable\"));\n\nvar _OverscrollEffectModule = _interopRequireDefault(require(\"./OverscrollEffect.module.css\"));\n\nvar _ScrollbarModule = _interopRequireDefault(require(\"./Scrollbar.module.css\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj[\"default\"] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar epsilon = _ScrollableNative.constants.epsilon,\n    isPageDown = _ScrollableNative.constants.isPageDown,\n    isPageUp = _ScrollableNative.constants.isPageUp,\n    overscrollTypeDone = _ScrollableNative.constants.overscrollTypeDone,\n    overscrollTypeNone = _ScrollableNative.constants.overscrollTypeNone,\n    overscrollTypeOnce = _ScrollableNative.constants.overscrollTypeOnce,\n    scrollWheelPageMultiplierForMaxPixel = _ScrollableNative.constants.scrollWheelPageMultiplierForMaxPixel,\n    overscrollRatioPrefix = '--scrollable-overscroll-ratio-',\n    overscrollTimeout = 300,\n    paginationPageMultiplier = 0.8,\n    reverseDirections = {\n  down: 'up',\n  up: 'down'\n};\n\nvar navigableFilter = function navigableFilter(elem) {\n  if (!_spotlight[\"default\"].getPointerMode() && // ignore containers passed as their id\n  typeof elem !== 'string' && elem.classList.contains(_ScrollbarModule[\"default\"].scrollButton)) {\n    return false;\n  }\n};\n\nvar configureSpotlightContainer = function configureSpotlightContainer(_ref) {\n  var spotlightId = _ref['data-spotlight-id'],\n      focusableScrollbar = _ref.focusableScrollbar;\n\n  _spotlight[\"default\"].set(spotlightId, {\n    navigableFilter: focusableScrollbar ? null : navigableFilter\n  });\n};\n/**\n * A Moonstone-styled native component that provides horizontal and vertical scrollbars.\n *\n * @class ScrollableBaseNative\n * @memberof moonstone/ScrollableNative\n * @extends ui/Scrollable.ScrollableBaseNative\n * @ui\n * @private\n */\n\n\nvar ScrollableBaseNative =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ScrollableBaseNative, _Component);\n\n  function ScrollableBaseNative(props) {\n    var _this;\n\n    _classCallCheck(this, ScrollableBaseNative);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ScrollableBaseNative).call(this, props));\n    _this.isWheeling = false;\n    _this.lastScrollPositionOnFocus = null;\n    _this.indexToFocus = null;\n    _this.nodeToFocus = null;\n    _this.isVoiceControl = false;\n    _this.voiceControlDirection = 'vertical';\n    _this.overscrollJobs = {\n      horizontal: {\n        before: null,\n        after: null\n      },\n      vertical: {\n        before: null,\n        after: null\n      }\n    };\n\n    _this.onMouseDown = function (ev) {\n      if (_this.props['data-spotlight-container-disabled']) {\n        ev.preventDefault();\n      } else {\n        _this.childRef.current.setContainerDisabled(false);\n      }\n    };\n\n    _this.onFlick = function (_ref2) {\n      var direction = _ref2.direction;\n\n      var bounds = _this.uiRef.current.getScrollBounds();\n\n      var focusedItem = _spotlight[\"default\"].getCurrent();\n\n      if (focusedItem) {\n        focusedItem.blur();\n      }\n\n      if ((direction === 'vertical' && _this.uiRef.current.canScrollVertically(bounds) || direction === 'horizontal' && _this.uiRef.current.canScrollHorizontally(bounds)) && !_this.props['data-spotlight-container-disabled']) {\n        _this.childRef.current.setContainerDisabled(true);\n      }\n    };\n\n    _this.onTouchStart = function () {\n      var focusedItem = _spotlight[\"default\"].getCurrent(),\n          _this$uiRef$current = _this.uiRef.current,\n          horizontalScrollbarRef = _this$uiRef$current.horizontalScrollbarRef,\n          verticalScrollbarRef = _this$uiRef$current.verticalScrollbarRef,\n          isHorizontalScrollButtonFocused = horizontalScrollbarRef.current && horizontalScrollbarRef.current.isOneOfScrollButtonsFocused(),\n          isVerticalScrollButtonFocused = verticalScrollbarRef.current && verticalScrollbarRef.current.isOneOfScrollButtonsFocused();\n\n      if (focusedItem && !isHorizontalScrollButtonFocused && !isVerticalScrollButtonFocused) {\n        focusedItem.blur();\n      }\n    };\n\n    _this.onWheel = function (ev) {\n      var overscrollEffectRequired = _this.props.overscrollEffectOn.wheel,\n          bounds = _this.uiRef.current.getScrollBounds(),\n          canScrollHorizontally = _this.uiRef.current.canScrollHorizontally(bounds),\n          canScrollVertically = _this.uiRef.current.canScrollVertically(bounds),\n          eventDeltaMode = ev.deltaMode,\n          eventDelta = -ev.wheelDeltaY || ev.deltaY;\n\n      var delta = 0,\n          needToHideThumb = false;\n\n      if (typeof window !== 'undefined') {\n        window.document.activeElement.blur();\n      }\n\n      _this.uiRef.current.showThumb(bounds); // FIXME This routine is a temporary support for horizontal wheel scroll.\n      // FIXME If web engine supports horizontal wheel, this routine should be refined or removed.\n\n\n      if (canScrollVertically) {\n        // This routine handles wheel events on scrollbars for vertical scroll.\n        if (eventDelta < 0 && _this.uiRef.current.scrollTop > 0 || eventDelta > 0 && _this.uiRef.current.scrollTop < bounds.maxTop) {\n          var _this$uiRef$current2 = _this.uiRef.current,\n              horizontalScrollbarRef = _this$uiRef$current2.horizontalScrollbarRef,\n              verticalScrollbarRef = _this$uiRef$current2.verticalScrollbarRef;\n\n          if (!_this.isWheeling) {\n            if (!_this.props['data-spotlight-container-disabled']) {\n              _this.childRef.current.setContainerDisabled(true);\n            }\n\n            _this.isWheeling = true;\n          } // Not to check if ev.target is a descendant of a wrapped component which may have a lot of nodes in it.\n\n\n          if (horizontalScrollbarRef.current && horizontalScrollbarRef.current.getContainerRef().current.contains(ev.target) || verticalScrollbarRef.current && verticalScrollbarRef.current.getContainerRef().current.contains(ev.target)) {\n            delta = _this.uiRef.current.calculateDistanceByWheel(eventDeltaMode, eventDelta, bounds.clientHeight * scrollWheelPageMultiplierForMaxPixel);\n            needToHideThumb = !delta;\n          } else if (overscrollEffectRequired) {\n            _this.uiRef.current.checkAndApplyOverscrollEffect('vertical', eventDelta > 0 ? 'after' : 'before', overscrollTypeOnce);\n          }\n        } else {\n          if (overscrollEffectRequired && (eventDelta < 0 && _this.uiRef.current.scrollTop <= 0 || eventDelta > 0 && _this.uiRef.current.scrollTop >= bounds.maxTop)) {\n            _this.uiRef.current.applyOverscrollEffect('vertical', eventDelta > 0 ? 'after' : 'before', overscrollTypeOnce, 1);\n          }\n\n          needToHideThumb = true;\n        }\n      } else if (canScrollHorizontally) {\n        // this routine handles wheel events on any children for horizontal scroll.\n        if (eventDelta < 0 && _this.uiRef.current.scrollLeft > 0 || eventDelta > 0 && _this.uiRef.current.scrollLeft < bounds.maxLeft) {\n          if (!_this.isWheeling) {\n            if (!_this.props['data-spotlight-container-disabled']) {\n              _this.childRef.current.setContainerDisabled(true);\n            }\n\n            _this.isWheeling = true;\n          }\n\n          delta = _this.uiRef.current.calculateDistanceByWheel(eventDeltaMode, eventDelta, bounds.clientWidth * scrollWheelPageMultiplierForMaxPixel);\n          needToHideThumb = !delta;\n        } else {\n          if (overscrollEffectRequired && (eventDelta < 0 && _this.uiRef.current.scrollLeft <= 0 || eventDelta > 0 && _this.uiRef.current.scrollLeft >= bounds.maxLeft)) {\n            _this.uiRef.current.applyOverscrollEffect('horizontal', eventDelta > 0 ? 'after' : 'before', overscrollTypeOnce, 1);\n          }\n\n          needToHideThumb = true;\n        }\n      }\n\n      if (delta !== 0) {\n        /* prevent native scrolling feature for vertical direction */\n        ev.preventDefault();\n        var direction = Math.sign(delta); // Not to accumulate scroll position if wheel direction is different from hold direction\n\n        if (direction !== _this.uiRef.current.wheelDirection) {\n          _this.uiRef.current.isScrollAnimationTargetAccumulated = false;\n          _this.uiRef.current.wheelDirection = direction;\n        }\n\n        _this.uiRef.current.scrollToAccumulatedTarget(delta, canScrollVertically, overscrollEffectRequired);\n      }\n\n      if (needToHideThumb) {\n        _this.uiRef.current.startHidingThumb();\n      }\n    };\n\n    _this.start = function (animate) {\n      if (!animate) {\n        _this.focusOnItem();\n      }\n    };\n\n    _this.startScrollOnFocus = function (pos) {\n      if (pos) {\n        var top = pos.top,\n            left = pos.left,\n            bounds = _this.uiRef.current.getScrollBounds(),\n            scrollHorizontally = bounds.maxLeft > 0 && Math.abs(left - _this.uiRef.current.scrollLeft) > epsilon,\n            scrollVertically = bounds.maxTop > 0 && Math.abs(top - _this.uiRef.current.scrollTop) > epsilon;\n\n        if (scrollHorizontally || scrollVertically) {\n          _this.uiRef.current.start({\n            targetX: left,\n            targetY: top,\n            animate: _this.animateOnFocus,\n            overscrollEffect: _this.props.overscrollEffectOn[_this.uiRef.current.lastInputType] && (!_this.childRef.current.shouldPreventOverscrollEffect || !_this.childRef.current.shouldPreventOverscrollEffect())\n          });\n\n          _this.lastScrollPositionOnFocus = pos;\n        }\n      }\n    };\n\n    _this.calculateAndScrollTo = function () {\n      var spotItem = _spotlight[\"default\"].getCurrent(),\n          positionFn = _this.childRef.current.calculatePositionOnFocus,\n          containerRef = _this.uiRef.current.childRefCurrent.containerRef;\n\n      if (spotItem && positionFn && containerRef.current && containerRef.current.contains(spotItem)) {\n        var lastPos = _this.lastScrollPositionOnFocus;\n        var pos; // If scroll animation is ongoing, we need to pass last target position to\n        // determine correct scroll position.\n\n        if (_this.uiRef.current.scrolling && lastPos) {\n          pos = positionFn({\n            item: spotItem,\n            scrollPosition: _this.props.direction !== 'horizontal' ? lastPos.top : lastPos.left\n          });\n        } else {\n          // scrollInfo passes in current `scrollHeight` and `scrollTop` before calculations\n          var scrollInfo = {\n            previousScrollHeight: _this.uiRef.current.bounds.scrollHeight,\n            scrollTop: _this.uiRef.current.scrollTop\n          };\n          pos = positionFn({\n            item: spotItem,\n            scrollInfo: scrollInfo\n          });\n        }\n\n        if (pos && (pos.left !== _this.uiRef.current.scrollLeft || pos.top !== _this.uiRef.current.scrollTop)) {\n          _this.startScrollOnFocus(pos);\n        } // update `scrollHeight`\n\n\n        _this.uiRef.current.bounds.scrollHeight = _this.uiRef.current.getScrollBounds().scrollHeight;\n      }\n    };\n\n    _this.onFocus = function (ev) {\n      var isDragging = _this.uiRef.current.isDragging,\n          shouldPreventScrollByFocus = _this.childRef.current.shouldPreventScrollByFocus ? _this.childRef.current.shouldPreventScrollByFocus() : false;\n\n      if (!_spotlight[\"default\"].getPointerMode()) {\n        _this.alertThumb();\n      }\n\n      if (!(shouldPreventScrollByFocus || _spotlight[\"default\"].getPointerMode() || isDragging)) {\n        var item = ev.target,\n            positionFn = _this.childRef.current.calculatePositionOnFocus,\n            spotItem = _spotlight[\"default\"].getCurrent();\n\n        if (item && item === spotItem && positionFn) {\n          _this.calculateAndScrollTo();\n        }\n      } else if (_this.childRef.current.setLastFocusedNode) {\n        _this.childRef.current.setLastFocusedNode(ev.target);\n      }\n    };\n\n    _this.scrollByPage = function (direction) {\n      // Only scroll by page when the vertical scrollbar is visible. Otherwise, treat the\n      // scroller as a plain container\n      if (!_this.uiRef.current.state.isVerticalScrollbarVisible) {\n        return false;\n      }\n\n      var _this$uiRef$current3 = _this.uiRef.current,\n          childRefCurrent = _this$uiRef$current3.childRefCurrent,\n          containerRef = _this$uiRef$current3.containerRef,\n          focusedItem = _spotlight[\"default\"].getCurrent();\n\n      _this.uiRef.current.lastInputType = 'pageKey'; // Should skip scroll by page when focusedItem is paging control button of Scrollbar\n\n      if (focusedItem && childRefCurrent.containerRef.current.contains(focusedItem)) {\n        var // VirtualList and Scroller have a spotlightId on containerRef\n        spotlightId = containerRef.current.dataset.spotlightId,\n            rDirection = reverseDirections[direction],\n            viewportBounds = containerRef.current.getBoundingClientRect(),\n            focusedItemBounds = focusedItem.getBoundingClientRect(),\n            endPoint = {\n          x: focusedItemBounds.left + focusedItemBounds.width / 2,\n          y: viewportBounds.top + (direction === 'up' ? focusedItemBounds.height / 2 - 1 : viewportBounds.height - focusedItemBounds.height / 2 + 1)\n        };\n        var next = null;\n        /* 1. Find spottable item in viewport */\n\n        next = (0, _target.getTargetByDirectionFromPosition)(rDirection, endPoint, spotlightId);\n\n        if (next !== focusedItem) {\n          _spotlight[\"default\"].focus(next);\n          /* 2. Find spottable item out of viewport */\n          // For Scroller\n\n        } else if (_this.childRef.current.scrollToNextPage) {\n          next = _this.childRef.current.scrollToNextPage({\n            direction: direction,\n            focusedItem: focusedItem,\n            reverseDirection: rDirection,\n            spotlightId: spotlightId\n          });\n\n          if (next !== null) {\n            _this.animateOnFocus = false;\n\n            _spotlight[\"default\"].focus(next);\n          } // For VirtualList\n\n        } else if (_this.childRef.current.scrollToNextItem) {\n          _this.childRef.current.scrollToNextItem({\n            direction: direction,\n            focusedItem: focusedItem,\n            reverseDirection: rDirection,\n            spotlightId: spotlightId\n          });\n        } // Need to check whether an overscroll effect is needed\n\n\n        return true;\n      }\n\n      return false;\n    };\n\n    _this.onKeyDown = function (ev) {\n      var overscrollEffectOn = _this.props.overscrollEffectOn,\n          keyCode = ev.keyCode,\n          repeat = ev.repeat;\n      var overscrollEffectRequired = false,\n          direction = null;\n      (0, _handle.forward)('onKeyDown', ev, _this.props);\n      _this.animateOnFocus = true;\n\n      if (isPageUp(keyCode) || isPageDown(keyCode)) {\n        ev.preventDefault();\n\n        if (!repeat && _this.hasFocus() && (_this.props.direction === 'vertical' || _this.props.direction === 'both')) {\n          _spotlight[\"default\"].setPointerMode(false);\n\n          direction = isPageUp(keyCode) ? 'up' : 'down';\n          overscrollEffectRequired = _this.scrollByPage(direction) && overscrollEffectOn.pageKey;\n        }\n      } else if (!_spotlight[\"default\"].getPointerMode() && !repeat && _this.hasFocus() && (0, _spotlight.getDirection)(keyCode)) {\n        var element = _spotlight[\"default\"].getCurrent();\n\n        direction = (0, _spotlight.getDirection)(keyCode);\n        _this.uiRef.current.lastInputType = 'arrowKey';\n        overscrollEffectRequired = overscrollEffectOn.arrowKey && !(element ? (0, _target.getTargetByDirectionFromElement)(direction, element) : null);\n\n        if (overscrollEffectRequired) {\n          var _this$uiRef$current4 = _this.uiRef.current,\n              horizontalScrollbarRef = _this$uiRef$current4.horizontalScrollbarRef,\n              verticalScrollbarRef = _this$uiRef$current4.verticalScrollbarRef;\n\n          if (horizontalScrollbarRef.current && horizontalScrollbarRef.current.getContainerRef().current.contains(element) || verticalScrollbarRef.current && verticalScrollbarRef.current.getContainerRef().current.contains(element)) {\n            overscrollEffectRequired = false;\n          }\n        }\n      }\n\n      if (direction && overscrollEffectRequired) {\n        /* if the spotlight focus will not move */\n        var orientation = direction === 'up' || direction === 'down' ? 'vertical' : 'horizontal',\n            bounds = _this.uiRef.current.getScrollBounds(),\n            scrollability = orientation === 'vertical' ? _this.uiRef.current.canScrollVertically(bounds) : _this.uiRef.current.canScrollHorizontally(bounds);\n\n        if (scrollability) {\n          var isRtl = _this.uiRef.current.state.rtl,\n              edge = direction === 'up' || !isRtl && direction === 'left' || isRtl && direction === 'right' ? 'before' : 'after';\n\n          _this.uiRef.current.checkAndApplyOverscrollEffect(orientation, edge, overscrollTypeOnce);\n        }\n      }\n    };\n\n    _this.onScrollbarButtonClick = function (_ref3) {\n      var isPreviousScrollButton = _ref3.isPreviousScrollButton,\n          isVerticalScrollBar = _ref3.isVerticalScrollBar;\n\n      var bounds = _this.uiRef.current.getScrollBounds(),\n          direction = isPreviousScrollButton ? -1 : 1,\n          pageDistance = direction * (isVerticalScrollBar ? bounds.clientHeight : bounds.clientWidth) * paginationPageMultiplier;\n\n      _this.uiRef.current.lastInputType = 'scrollbarButton';\n\n      if (direction !== _this.uiRef.current.wheelDirection) {\n        _this.uiRef.current.isScrollAnimationTargetAccumulated = false;\n        _this.uiRef.current.wheelDirection = direction;\n      }\n\n      _this.uiRef.current.scrollToAccumulatedTarget(pageDistance, isVerticalScrollBar, _this.props.overscrollEffectOn.scrollbarButton);\n    };\n\n    _this.scrollStopOnScroll = function () {\n      if (!_this.props['data-spotlight-container-disabled']) {\n        _this.childRef.current.setContainerDisabled(false);\n      }\n\n      _this.focusOnItem();\n\n      _this.lastScrollPositionOnFocus = null;\n      _this.isWheeling = false;\n\n      if (_this.isVoiceControl) {\n        _this.isVoiceControl = false;\n\n        _this.updateFocusAfterVoiceControl();\n      }\n    };\n\n    _this.scrollTo = function (opt) {\n      _this.indexToFocus = opt.focus && typeof opt.index === 'number' ? opt.index : null;\n      _this.nodeToFocus = opt.focus && opt.node instanceof Object && opt.node.nodeType === 1 ? opt.node : null;\n    };\n\n    _this.alertThumb = function () {\n      var bounds = _this.uiRef.current.getScrollBounds();\n\n      _this.uiRef.current.showThumb(bounds);\n\n      _this.uiRef.current.startHidingThumb();\n    };\n\n    _this.alertThumbAfterRendered = function () {\n      var spotItem = _spotlight[\"default\"].getCurrent();\n\n      if (!_spotlight[\"default\"].getPointerMode() && spotItem && _this.uiRef.current && _this.uiRef.current.childRefCurrent.containerRef.current.contains(spotItem) && _this.uiRef.current.isUpdatedScrollThumb) {\n        _this.alertThumb();\n      }\n    };\n\n    _this.handleScrollerUpdate = function () {\n      if (_this.uiRef.current.scrollToInfo === null) {\n        var scrollHeight = _this.uiRef.current.getScrollBounds().scrollHeight;\n\n        if (scrollHeight !== _this.uiRef.current.bounds.scrollHeight) {\n          _this.calculateAndScrollTo();\n        }\n      } // oddly, Scroller manages this.uiRef.current.bounds so if we don't update it here (it is also\n      // updated in calculateAndScrollTo but we might not have made it to that point), it will be\n      // out of date when we land back in this method next time.\n\n\n      _this.uiRef.current.bounds.scrollHeight = _this.uiRef.current.getScrollBounds().scrollHeight;\n    };\n\n    _this.clearOverscrollEffect = function (orientation, edge) {\n      _this.overscrollJobs[orientation][edge].startAfter(overscrollTimeout, orientation, edge, overscrollTypeNone, 0);\n\n      _this.uiRef.current.setOverscrollStatus(orientation, edge, overscrollTypeNone, 0);\n    };\n\n    _this.applyOverscrollEffect = function (orientation, edge, type, ratio) {\n      var nodeRef = _this.overscrollRefs[orientation].current;\n\n      if (nodeRef) {\n        nodeRef.style.setProperty(overscrollRatioPrefix + orientation + edge, ratio);\n\n        if (type === overscrollTypeOnce) {\n          _this.overscrollJobs[orientation][edge].start(orientation, edge, overscrollTypeDone, 0);\n        }\n      }\n    };\n\n    _this.createOverscrollJob = function (orientation, edge) {\n      if (!_this.overscrollJobs[orientation][edge]) {\n        _this.overscrollJobs[orientation][edge] = new _util.Job(_this.applyOverscrollEffect.bind(_assertThisInitialized(_this)), overscrollTimeout);\n      }\n    };\n\n    _this.stopOverscrollJob = function (orientation, edge) {\n      var job = _this.overscrollJobs[orientation][edge];\n\n      if (job) {\n        job.stop();\n      }\n    };\n\n    _this.addEventListeners = function (childContainerRef) {\n      if (childContainerRef.current && childContainerRef.current.addEventListener) {\n        childContainerRef.current.addEventListener('focusin', _this.onFocus);\n\n        if (_platform[\"default\"].webos) {\n          childContainerRef.current.addEventListener('webOSVoice', _this.onVoice);\n          childContainerRef.current.setAttribute('data-webos-voice-intent', 'Scroll');\n        }\n      }\n    };\n\n    _this.removeEventListeners = function (childContainerRef) {\n      if (childContainerRef.current && childContainerRef.current.removeEventListener) {\n        childContainerRef.current.removeEventListener('focusin', _this.onFocus);\n\n        if (_platform[\"default\"].webos) {\n          childContainerRef.current.removeEventListener('webOSVoice', _this.onVoice);\n          childContainerRef.current.removeAttribute('data-webos-voice-intent');\n        }\n      }\n    };\n\n    _this.updateFocusAfterVoiceControl = function () {\n      var spotItem = _spotlight[\"default\"].getCurrent();\n\n      if (spotItem && _this.uiRef.current.containerRef.current.contains(spotItem)) {\n        var viewportBounds = _this.uiRef.current.containerRef.current.getBoundingClientRect(),\n            spotItemBounds = spotItem.getBoundingClientRect(),\n            nodes = _spotlight[\"default\"].getSpottableDescendants(_this.uiRef.current.containerRef.current.dataset.spotlightId),\n            first = _this.voiceControlDirection === 'vertical' ? 'top' : 'left',\n            last = _this.voiceControlDirection === 'vertical' ? 'bottom' : 'right';\n\n        if (spotItemBounds[last] < viewportBounds[first] || spotItemBounds[first] > viewportBounds[last]) {\n          for (var i = 0; i < nodes.length; i++) {\n            var nodeBounds = nodes[i].getBoundingClientRect();\n\n            if (nodeBounds[first] > viewportBounds[first] && nodeBounds[last] < viewportBounds[last]) {\n              _spotlight[\"default\"].focus(nodes[i]);\n\n              break;\n            }\n          }\n        }\n      }\n    };\n\n    _this.isReachedEdge = function (scrollPos, ltrBound, rtlBound) {\n      var isRtl = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var bound = isRtl ? rtlBound : ltrBound;\n      return bound === 0 && scrollPos === 0 || bound > 0 && scrollPos >= bound - 1;\n    };\n\n    _this.onVoice = function (e) {\n      var isHorizontal = _this.props.direction === 'horizontal',\n          isRtl = _this.uiRef.current.state.rtl,\n          _this$uiRef$current5 = _this.uiRef.current,\n          scrollTop = _this$uiRef$current5.scrollTop,\n          scrollLeft = _this$uiRef$current5.scrollLeft,\n          _this$uiRef$current$g = _this.uiRef.current.getScrollBounds(),\n          maxLeft = _this$uiRef$current$g.maxLeft,\n          maxTop = _this$uiRef$current$g.maxTop,\n          verticalDirection = ['up', 'down', 'top', 'bottom'],\n          horizontalDirection = isRtl ? ['right', 'left', 'rightmost', 'leftmost'] : ['left', 'right', 'leftmost', 'rightmost'],\n          movement = ['previous', 'next', 'first', 'last'];\n\n      var scroll = e && e.detail && e.detail.scroll,\n          index = movement.indexOf(scroll);\n\n      if (index > -1) {\n        scroll = isHorizontal ? horizontalDirection[index] : verticalDirection[index];\n      }\n\n      _this.voiceControlDirection = verticalDirection.includes(scroll) && 'vertical' || horizontalDirection.includes(scroll) && 'horizontal' || null; // Case 1. Invalid direction\n\n      if (_this.voiceControlDirection === null) {\n        _this.isVoiceControl = false; // Case 2. Cannot scroll\n      } else if (['up', 'top'].includes(scroll) && _this.isReachedEdge(scrollTop, 0) || ['down', 'bottom'].includes(scroll) && _this.isReachedEdge(scrollTop, maxTop) || ['left', 'leftmost'].includes(scroll) && _this.isReachedEdge(scrollLeft, 0, maxLeft, isRtl) || ['right', 'rightmost'].includes(scroll) && _this.isReachedEdge(scrollLeft, maxLeft, 0, isRtl)) {\n        if (window.webOSVoiceReportActionResult) {\n          window.webOSVoiceReportActionResult({\n            voiceUi: {\n              exception: 'alreadyCompleted'\n            }\n          });\n          e.preventDefault();\n        } // Case 3. Can scroll\n\n      } else {\n        _this.isVoiceControl = true;\n\n        if (['up', 'down', 'left', 'right'].includes(scroll)) {\n          var isPreviousScrollButton = scroll === 'up' || scroll === 'left' && !isRtl || scroll === 'right' && isRtl;\n\n          _this.onScrollbarButtonClick({\n            isPreviousScrollButton: isPreviousScrollButton,\n            isVerticalScrollBar: verticalDirection.includes(scroll)\n          });\n        } else {\n          // ['top', 'bottom', 'leftmost', 'rightmost'].includes(scroll)\n          _this.uiRef.current.scrollTo({\n            align: verticalDirection.includes(scroll) && scroll || (scroll === 'leftmost' && isRtl || scroll === 'rightmost' && !isRtl) && 'right' || 'left'\n          });\n        }\n\n        e.preventDefault();\n      }\n    };\n\n    _this.scrollbarProps = {\n      cbAlertThumb: _this.alertThumbAfterRendered,\n      onNextScroll: _this.onScrollbarButtonClick,\n      onPrevScroll: _this.onScrollbarButtonClick\n    };\n    _this.overscrollRefs = {\n      horizontal: _react[\"default\"].createRef(),\n      vertical: _react[\"default\"].createRef()\n    };\n    _this.childRef = _react[\"default\"].createRef();\n    _this.uiRef = _react[\"default\"].createRef();\n    configureSpotlightContainer(props);\n    return _this;\n  }\n\n  _createClass(ScrollableBaseNative, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.createOverscrollJob('horizontal', 'before');\n      this.createOverscrollJob('horizontal', 'after');\n      this.createOverscrollJob('vertical', 'before');\n      this.createOverscrollJob('vertical', 'after');\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps['data-spotlight-id'] !== this.props['data-spotlight-id'] || prevProps.focusableScrollbar !== this.props.focusableScrollbar) {\n        configureSpotlightContainer(this.props);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopOverscrollJob('horizontal', 'before');\n      this.stopOverscrollJob('horizontal', 'after');\n      this.stopOverscrollJob('vertical', 'before');\n      this.stopOverscrollJob('vertical', 'after');\n    } // status\n\n  }, {\n    key: \"hasFocus\",\n    value: function hasFocus() {\n      var current = _spotlight[\"default\"].getCurrent();\n\n      if (!current) {\n        var spotlightId = _spotlight[\"default\"].getActiveContainer();\n\n        current = document.querySelector(\"[data-spotlight-id=\\\"\".concat(spotlightId, \"\\\"]\"));\n      }\n\n      return current && this.uiRef.current.containerRef.current.contains(current);\n    }\n  }, {\n    key: \"focusOnItem\",\n    value: function focusOnItem() {\n      var childRef = this.childRef;\n\n      if (this.indexToFocus !== null && typeof childRef.current.focusByIndex === 'function') {\n        childRef.current.focusByIndex(this.indexToFocus);\n        this.indexToFocus = null;\n      }\n\n      if (this.nodeToFocus !== null && typeof childRef.current.focusOnNode === 'function') {\n        childRef.current.focusOnNode(this.nodeToFocus);\n        this.nodeToFocus = null;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          childRenderer = _this$props.childRenderer,\n          spotlightContainer = _this$props['data-spotlight-container'],\n          spotlightContainerDisabled = _this$props['data-spotlight-container-disabled'],\n          spotlightId = _this$props['data-spotlight-id'],\n          focusableScrollbar = _this$props.focusableScrollbar,\n          scrollDownAriaLabel = _this$props.scrollDownAriaLabel,\n          scrollLeftAriaLabel = _this$props.scrollLeftAriaLabel,\n          scrollRightAriaLabel = _this$props.scrollRightAriaLabel,\n          scrollUpAriaLabel = _this$props.scrollUpAriaLabel,\n          rest = _objectWithoutProperties(_this$props, [\"childRenderer\", \"data-spotlight-container\", \"data-spotlight-container-disabled\", \"data-spotlight-id\", \"focusableScrollbar\", \"scrollDownAriaLabel\", \"scrollLeftAriaLabel\", \"scrollRightAriaLabel\", \"scrollUpAriaLabel\"]),\n          downButtonAriaLabel = scrollDownAriaLabel == null ? (0, _$L[\"default\"])('scroll down') : scrollDownAriaLabel,\n          upButtonAriaLabel = scrollUpAriaLabel == null ? (0, _$L[\"default\"])('scroll up') : scrollUpAriaLabel,\n          rightButtonAriaLabel = scrollRightAriaLabel == null ? (0, _$L[\"default\"])('scroll right') : scrollRightAriaLabel,\n          leftButtonAriaLabel = scrollLeftAriaLabel == null ? (0, _$L[\"default\"])('scroll left') : scrollLeftAriaLabel;\n\n      return _react[\"default\"].createElement(_ScrollableNative.ScrollableBaseNative, Object.assign({\n        noScrollByDrag: !_platform[\"default\"].touch\n      }, rest, {\n        addEventListeners: this.addEventListeners,\n        applyOverscrollEffect: this.applyOverscrollEffect,\n        clearOverscrollEffect: this.clearOverscrollEffect,\n        onFlick: this.onFlick,\n        onKeyDown: this.onKeyDown,\n        onMouseDown: this.onMouseDown,\n        onWheel: this.onWheel,\n        ref: this.uiRef,\n        removeEventListeners: this.removeEventListeners,\n        scrollStopOnScroll: this.scrollStopOnScroll,\n        scrollTo: this.scrollTo,\n        start: this.start,\n        containerRenderer: function containerRenderer(_ref4) {\n          var childComponentProps = _ref4.childComponentProps,\n              ChildWrapper = _ref4.childWrapper,\n              _ref4$childWrapperPro = _ref4.childWrapperProps,\n              contentClassName = _ref4$childWrapperPro.className,\n              restChildWrapperProps = _objectWithoutProperties(_ref4$childWrapperPro, [\"className\"]),\n              className = _ref4.className,\n              componentCss = _ref4.componentCss,\n              uiContainerRef = _ref4.containerRef,\n              horizontalScrollbarProps = _ref4.horizontalScrollbarProps,\n              initUiChildRef = _ref4.initChildRef,\n              isHorizontalScrollbarVisible = _ref4.isHorizontalScrollbarVisible,\n              isVerticalScrollbarVisible = _ref4.isVerticalScrollbarVisible,\n              rtl = _ref4.rtl,\n              scrollTo = _ref4.scrollTo,\n              style = _ref4.style,\n              verticalScrollbarProps = _ref4.verticalScrollbarProps;\n\n          return _react[\"default\"].createElement(\"div\", {\n            className: (0, _classnames[\"default\"])(className, _OverscrollEffectModule[\"default\"].scrollable),\n            \"data-spotlight-container\": spotlightContainer,\n            \"data-spotlight-container-disabled\": spotlightContainerDisabled,\n            \"data-spotlight-id\": spotlightId,\n            onTouchStart: _this2.onTouchStart,\n            ref: uiContainerRef,\n            style: style\n          }, _react[\"default\"].createElement(\"div\", {\n            className: (0, _classnames[\"default\"])(componentCss.container, _OverscrollEffectModule[\"default\"].overscrollFrame, _OverscrollEffectModule[\"default\"].vertical, isHorizontalScrollbarVisible ? _OverscrollEffectModule[\"default\"].horizontalScrollbarVisible : null),\n            ref: _this2.overscrollRefs.vertical\n          }, _react[\"default\"].createElement(ChildWrapper, Object.assign({\n            className: (0, _classnames[\"default\"])(contentClassName, _OverscrollEffectModule[\"default\"].overscrollFrame, _OverscrollEffectModule[\"default\"].horizontal),\n            ref: _this2.overscrollRefs.horizontal\n          }, restChildWrapperProps), childRenderer(_objectSpread({}, childComponentProps, {\n            cbScrollTo: scrollTo,\n            className: componentCss.scrollableFill,\n            initUiChildRef: initUiChildRef,\n            isVerticalScrollbarVisible: isVerticalScrollbarVisible,\n            onUpdate: _this2.handleScrollerUpdate,\n            ref: _this2.childRef,\n            rtl: rtl,\n            spotlightId: spotlightId\n          }))), isVerticalScrollbarVisible ? _react[\"default\"].createElement(_Scrollbar[\"default\"], Object.assign({}, verticalScrollbarProps, _this2.scrollbarProps, {\n            disabled: !isVerticalScrollbarVisible,\n            focusableScrollButtons: focusableScrollbar,\n            nextButtonAriaLabel: downButtonAriaLabel,\n            previousButtonAriaLabel: upButtonAriaLabel,\n            rtl: rtl\n          })) : null), isHorizontalScrollbarVisible ? _react[\"default\"].createElement(_Scrollbar[\"default\"], Object.assign({}, horizontalScrollbarProps, _this2.scrollbarProps, {\n            corner: isVerticalScrollbarVisible,\n            disabled: !isHorizontalScrollbarVisible,\n            focusableScrollButtons: focusableScrollbar,\n            nextButtonAriaLabel: rightButtonAriaLabel,\n            previousButtonAriaLabel: leftButtonAriaLabel,\n            rtl: rtl\n          })) : null);\n        }\n      }));\n    }\n  }]);\n\n  return ScrollableBaseNative;\n}(_react.Component);\n/**\n * A Moonstone-styled component that provides horizontal and vertical scrollbars.\n *\n * @class ScrollableNative\n * @memberof moonstone/ScrollableNative\n * @mixes spotlight/SpotlightContainerDecorator\n * @extends moonstone/Scrollable.ScrollableBaseNative\n * @ui\n * @private\n */\n\n\nexports.ScrollableBaseNative = ScrollableBaseNative;\nScrollableBaseNative.displayName = 'ScrollableNative';\nScrollableBaseNative.propTypes =\n/** @lends moonstone/ScrollableNative.ScrollableNative.prototype */\n{\n  /**\n   * Render function.\n   *\n   * @type {Function}\n   * @required\n   * @private\n   */\n  childRenderer: _propTypes[\"default\"].func.isRequired,\n\n  /**\n   * This is set to `true` by SpotlightContainerDecorator\n   *\n   * @type {Boolean}\n   * @private\n   */\n  'data-spotlight-container': _propTypes[\"default\"].bool,\n\n  /**\n   * `false` if the content of the list or the scroller could get focus\n   *\n   * @type {Boolean}\n   * @default false\n   * @private\n   */\n  'data-spotlight-container-disabled': _propTypes[\"default\"].bool,\n\n  /**\n   * This is passed onto the wrapped component to allow\n   * it to customize the spotlight container for its use case.\n   *\n   * @type {String}\n   * @private\n   */\n  'data-spotlight-id': _propTypes[\"default\"].string,\n\n  /**\n   * Direction of the list or the scroller.\n   * `'both'` could be only used for[Scroller]{@link moonstone/Scroller.Scroller}.\n   *\n   * Valid values are:\n   * * `'both'`,\n   * * `'horizontal'`, and\n   * * `'vertical'`.\n   *\n   * @type {String}\n   * @private\n   */\n  direction: _propTypes[\"default\"].oneOf(['both', 'horizontal', 'vertical']),\n\n  /**\n   * Allows 5-way navigation to the scrollbar controls. By default, 5-way will\n   * not move focus to the scrollbar controls.\n   *\n   * @type {Boolean}\n   * @default false\n   * @public\n   */\n  focusableScrollbar: _propTypes[\"default\"].bool,\n\n  /**\n   * Specifies overscroll effects shows on which type of inputs.\n   *\n   * @type {Object}\n   * @default {\n   *\tarrowKey: false,\n   *\tdrag: false,\n   *\tpageKey: false,\n   *\tscrollbarButton: false,\n   *\twheel: true\n   * }\n   * @private\n   */\n  overscrollEffectOn: _propTypes[\"default\"].shape({\n    arrowKey: _propTypes[\"default\"].bool,\n    drag: _propTypes[\"default\"].bool,\n    pageKey: _propTypes[\"default\"].bool,\n    scrollbarButton: _propTypes[\"default\"].bool,\n    wheel: _propTypes[\"default\"].bool\n  }),\n\n  /**\n   * Sets the hint string read when focusing the next button in the vertical scroll bar.\n   *\n   * @type {String}\n   * @default $L('scroll down')\n   * @public\n   */\n  scrollDownAriaLabel: _propTypes[\"default\"].string,\n\n  /**\n   * Sets the hint string read when focusing the previous button in the horizontal scroll bar.\n   *\n   * @type {String}\n   * @default $L('scroll left')\n   * @public\n   */\n  scrollLeftAriaLabel: _propTypes[\"default\"].string,\n\n  /**\n   * Sets the hint string read when focusing the next button in the horizontal scroll bar.\n   *\n   * @type {String}\n   * @default $L('scroll right')\n   * @public\n   */\n  scrollRightAriaLabel: _propTypes[\"default\"].string,\n\n  /**\n   * Sets the hint string read when focusing the previous button in the vertical scroll bar.\n   *\n   * @type {String}\n   * @default $L('scroll up')\n   * @public\n   */\n  scrollUpAriaLabel: _propTypes[\"default\"].string\n};\nScrollableBaseNative.defaultProps = {\n  'data-spotlight-container-disabled': false,\n  focusableScrollbar: false,\n  overscrollEffectOn: {\n    arrowKey: false,\n    drag: false,\n    pageKey: false,\n    scrollbarButton: false,\n    wheel: true\n  }\n};\nvar ScrollableNative = (0, _Skinnable[\"default\"])((0, _SpotlightContainerDecorator[\"default\"])({\n  overflow: true,\n  preserveId: true,\n  restrict: 'self-first'\n}, (0, _I18nDecorator.I18nContextDecorator)({\n  rtlProp: 'rtl'\n}, ScrollableBaseNative)));\nexports.ScrollableNative = ScrollableNative;\nvar _default = ScrollableNative;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"module"}